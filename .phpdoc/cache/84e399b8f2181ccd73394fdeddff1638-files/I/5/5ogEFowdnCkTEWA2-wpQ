1738044941
84e399b8f2181ccd73394fdeddff1638-phpdoc%3Ac55d52a9fea5390ac805a88420614cf9-d874e3aa86a7ddc43297a0b977f6cc37
s:123180:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czozOToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBuYW1lIjtzOjM2OiJmZDYwMjQ0ZWQ2Zjk2YjY3ZDU1MDE2ZmNkOTBjNTE2OC5waHAiO3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAbmFtZXNwYWNlcyI7YTowOnt9czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBpbmNsdWRlcyI7YTowOnt9czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBmdW5jdGlvbnMiO2E6MDp7fXM6NDQ6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAY29uc3RhbnRzIjthOjA6e31zOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGNsYXNzZXMiO2E6MTp7czo0ODoiXF9fVHdpZ1RlbXBsYXRlX2MyM2ZlYzQ5ZTc4OGViMGVjZWIxNTBmMjk5YzE2NWRjIjtPOjM1OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXyI6MTU6e3M6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBpbXBsZW1lbnRzIjthOjA6e31zOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AY29uc3RhbnRzIjthOjA6e31zOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AcHJvcGVydGllcyI7YToyOntzOjU3OiJcX19Ud2lnVGVtcGxhdGVfYzIzZmVjNDllNzg4ZWIwZWNlYjE1MGYyOTljMTY1ZGM6OiRzb3VyY2UiO086Mzc6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkiOjEyOntzOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxQcm9wZXJ0eQB0eXBlcyI7YTowOnt9czo0OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkAdmlzaWJpbGl0eSI7TzozOToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxWaXNpYmlsaXR5IjoxOntzOjUxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxWaXNpYmlsaXR5AHZpc2liaWxpdHkiO3M6NzoicHJpdmF0ZSI7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXFByb3BlcnR5AGxvY2F0aW9uIjtPOjMzOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24iOjI6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AbGluZU51bWJlciI7aToxOTtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGNvbHVtbk51bWJlciI7aTowO31zOjUwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxQcm9wZXJ0eQBlbmRMb2NhdGlvbiI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uIjoyOntzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGxpbmVOdW1iZXIiO2k6MTk7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBjb2x1bW5OdW1iZXIiO2k6MDt9czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkAZnFzZW4iO086MzA6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbiI6Mjp7czozNzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBmcXNlbiI7czo1NzoiXF9fVHdpZ1RlbXBsYXRlX2MyM2ZlYzQ5ZTc4OGViMGVjZWIxNTBmMjk5YzE2NWRjOjokc291cmNlIjtzOjM2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAG5hbWUiO3M6Njoic291cmNlIjt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkAZG9jQmxvY2siO047czo0NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkAZGVmYXVsdCI7TjtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxQcm9wZXJ0eQBzdGF0aWMiO2I6MDtzOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxQcm9wZXJ0eQB0eXBlIjtOO3M6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXFByb3BlcnR5AHJlYWRPbmx5IjtiOjA7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkAbWV0YWRhdGEiO2E6MDp7fXM6NDk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXFByb3BlcnR5AGF0dHJpYnV0ZXMiO2E6MDp7fX1zOjU3OiJcX19Ud2lnVGVtcGxhdGVfYzIzZmVjNDllNzg4ZWIwZWNlYjE1MGYyOTljMTY1ZGM6OiRtYWNyb3MiO086Mzc6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkiOjEyOntzOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxQcm9wZXJ0eQB0eXBlcyI7YTowOnt9czo0OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkAdmlzaWJpbGl0eSI7TzozOToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxWaXNpYmlsaXR5IjoxOntzOjUxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxWaXNpYmlsaXR5AHZpc2liaWxpdHkiO3M6NzoicHJpdmF0ZSI7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXFByb3BlcnR5AGxvY2F0aW9uIjtPOjMzOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24iOjI6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AbGluZU51bWJlciI7aToyMDtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGNvbHVtbk51bWJlciI7aTowO31zOjUwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxQcm9wZXJ0eQBlbmRMb2NhdGlvbiI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uIjoyOntzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGxpbmVOdW1iZXIiO2k6MjA7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBjb2x1bW5OdW1iZXIiO2k6MDt9czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkAZnFzZW4iO086MzA6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbiI6Mjp7czozNzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBmcXNlbiI7czo1NzoiXF9fVHdpZ1RlbXBsYXRlX2MyM2ZlYzQ5ZTc4OGViMGVjZWIxNTBmMjk5YzE2NWRjOjokbWFjcm9zIjtzOjM2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAG5hbWUiO3M6NjoibWFjcm9zIjt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkAZG9jQmxvY2siO047czo0NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkAZGVmYXVsdCI7czoyOiJbXSI7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkAc3RhdGljIjtiOjA7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkAdHlwZSI7TjtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxQcm9wZXJ0eQByZWFkT25seSI7YjowO3M6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXFByb3BlcnR5AG1ldGFkYXRhIjthOjA6e31zOjQ5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxQcm9wZXJ0eQBhdHRyaWJ1dGVzIjthOjA6e319fXM6NDQ6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBtZXRob2RzIjthOjY6e3M6NjM6IlxfX1R3aWdUZW1wbGF0ZV9jMjNmZWM0OWU3ODhlYjBlY2ViMTUwZjI5OWMxNjVkYzo6X19jb25zdHJ1Y3QoKSI7TzozNToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QiOjEzOntzOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAYXJndW1lbnRzIjthOjE6e2k6MDtPOjM3OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50Ijo1OntzOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudAB0eXBlIjtPOjM4OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcT2JqZWN0XyI6MTp7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xPYmplY3RfAGZxc2VuIjtPOjMwOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4iOjI6e3M6Mzc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AZnFzZW4iO3M6MTc6IlxUd2lnXEVudmlyb25tZW50IjtzOjM2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAG5hbWUiO3M6MTE6IkVudmlyb25tZW50Ijt9fXM6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AG5hbWUiO3M6MzoiZW52IjtzOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudABkZWZhdWx0IjtOO3M6NTA6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AGJ5UmVmZXJlbmNlIjtiOjA7czo0OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAaXNWYXJpYWRpYyI7YjowO319czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGxvY2F0aW9uIjtPOjMzOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24iOjI6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AbGluZU51bWJlciI7aToyMjtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGNvbHVtbk51bWJlciI7aTo1NjA7fXM6NDg6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABlbmRMb2NhdGlvbiI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uIjoyOntzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGxpbmVOdW1iZXIiO2k6MzI7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBjb2x1bW5OdW1iZXIiO2k6NzczO31zOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAcmV0dXJuVHlwZSI7TzozNzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXE1peGVkXyI6MDp7fXM6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABmcXNlbiI7TzozMDoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuIjoyOntzOjM3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAGZxc2VuIjtzOjYzOiJcX19Ud2lnVGVtcGxhdGVfYzIzZmVjNDllNzg4ZWIwZWNlYjE1MGYyOTljMTY1ZGM6Ol9fY29uc3RydWN0KCkiO3M6MzY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AbmFtZSI7czoxMToiX19jb25zdHJ1Y3QiO31zOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAdmlzaWJpbGl0eSI7TzozOToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxWaXNpYmlsaXR5IjoxOntzOjUxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxWaXNpYmlsaXR5AHZpc2liaWxpdHkiO3M6NjoicHVibGljIjt9czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGRvY0Jsb2NrIjtOO3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABhYnN0cmFjdCI7YjowO3M6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABzdGF0aWMiO2I6MDtzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZmluYWwiO2I6MDtzOjU3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAaGFzUmV0dXJuQnlSZWZlcmVuY2UiO2I6MDtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAbWV0YWRhdGEiO2E6MDp7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABhdHRyaWJ1dGVzIjthOjA6e319czo2MToiXF9fVHdpZ1RlbXBsYXRlX2MyM2ZlYzQ5ZTc4OGViMGVjZWIxNTBmMjk5YzE2NWRjOjpkb0Rpc3BsYXkoKSI7TzozNToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QiOjEzOntzOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAYXJndW1lbnRzIjthOjI6e2k6MDtPOjM3OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50Ijo1OntzOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudAB0eXBlIjtPOjM3OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQXJyYXlfIjozOntzOjEyOiIAKgB2YWx1ZVR5cGUiO086Mzc6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xNaXhlZF8iOjA6e31zOjEwOiIAKgBrZXlUeXBlIjtOO3M6MTc6IgAqAGRlZmF1bHRLZXlUeXBlIjtPOjM5OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQ29tcG91bmQiOjI6e3M6NTI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQWdncmVnYXRlZFR5cGUAdHlwZXMiO2E6Mjp7aTowO086Mzg6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xTdHJpbmdfIjowOnt9aToxO086Mzg6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xJbnRlZ2VyIjowOnt9fXM6NTI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQWdncmVnYXRlZFR5cGUAdG9rZW4iO3M6MToifCI7fX1zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudABuYW1lIjtzOjc6ImNvbnRleHQiO3M6NDY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AGRlZmF1bHQiO047czo1MDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAYnlSZWZlcmVuY2UiO2I6MDtzOjQ5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudABpc1ZhcmlhZGljIjtiOjA7fWk6MTtPOjM3OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50Ijo1OntzOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudAB0eXBlIjtPOjM3OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQXJyYXlfIjozOntzOjEyOiIAKgB2YWx1ZVR5cGUiO086Mzc6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xNaXhlZF8iOjA6e31zOjEwOiIAKgBrZXlUeXBlIjtOO3M6MTc6IgAqAGRlZmF1bHRLZXlUeXBlIjtPOjM5OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQ29tcG91bmQiOjI6e3M6NTI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQWdncmVnYXRlZFR5cGUAdHlwZXMiO2E6Mjp7aTowO086Mzg6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xTdHJpbmdfIjowOnt9aToxO086Mzg6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xJbnRlZ2VyIjowOnt9fXM6NTI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQWdncmVnYXRlZFR5cGUAdG9rZW4iO3M6MToifCI7fX1zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudABuYW1lIjtzOjY6ImJsb2NrcyI7czo0NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAZGVmYXVsdCI7czoyOiJbXSI7czo1MDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAYnlSZWZlcmVuY2UiO2I6MDtzOjQ5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudABpc1ZhcmlhZGljIjtiOjA7fX1zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAbG9jYXRpb24iO086MzM6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbiI6Mjp7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBsaW5lTnVtYmVyIjtpOjM0O3M6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AY29sdW1uTnVtYmVyIjtpOjc4MDt9czo0ODoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGVuZExvY2F0aW9uIjtPOjMzOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24iOjI6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AbGluZU51bWJlciI7aTo3NTU7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBjb2x1bW5OdW1iZXIiO2k6Mzk1MzY7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZAByZXR1cm5UeXBlIjtPOjM3OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcTWl4ZWRfIjowOnt9czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGZxc2VuIjtPOjMwOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4iOjI6e3M6Mzc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AZnFzZW4iO3M6NjE6IlxfX1R3aWdUZW1wbGF0ZV9jMjNmZWM0OWU3ODhlYjBlY2ViMTUwZjI5OWMxNjVkYzo6ZG9EaXNwbGF5KCkiO3M6MzY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AbmFtZSI7czo5OiJkb0Rpc3BsYXkiO31zOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAdmlzaWJpbGl0eSI7TzozOToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxWaXNpYmlsaXR5IjoxOntzOjUxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxWaXNpYmlsaXR5AHZpc2liaWxpdHkiO3M6OToicHJvdGVjdGVkIjt9czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGRvY0Jsb2NrIjtOO3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABhYnN0cmFjdCI7YjowO3M6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABzdGF0aWMiO2I6MDtzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZmluYWwiO2I6MDtzOjU3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAaGFzUmV0dXJuQnlSZWZlcmVuY2UiO2I6MDtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAbWV0YWRhdGEiO2E6MDp7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABhdHRyaWJ1dGVzIjthOjA6e319czo2NzoiXF9fVHdpZ1RlbXBsYXRlX2MyM2ZlYzQ5ZTc4OGViMGVjZWIxNTBmMjk5YzE2NWRjOjpnZXRUZW1wbGF0ZU5hbWUoKSI7TzozNToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QiOjEzOntzOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAYXJndW1lbnRzIjthOjA6e31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAbG9jYXRpb24iO086MzM6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbiI6Mjp7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBsaW5lTnVtYmVyIjtpOjc2MDtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGNvbHVtbk51bWJlciI7aTozOTU4Njt9czo0ODoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGVuZExvY2F0aW9uIjtPOjMzOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24iOjI6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AbGluZU51bWJlciI7aTo3NjM7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBjb2x1bW5OdW1iZXIiO2k6Mzk2OTE7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZAByZXR1cm5UeXBlIjtPOjM3OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcTWl4ZWRfIjowOnt9czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGZxc2VuIjtPOjMwOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4iOjI6e3M6Mzc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AZnFzZW4iO3M6Njc6IlxfX1R3aWdUZW1wbGF0ZV9jMjNmZWM0OWU3ODhlYjBlY2ViMTUwZjI5OWMxNjVkYzo6Z2V0VGVtcGxhdGVOYW1lKCkiO3M6MzY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AbmFtZSI7czoxNToiZ2V0VGVtcGxhdGVOYW1lIjt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAHZpc2liaWxpdHkiO086Mzk6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcVmlzaWJpbGl0eSI6MTp7czo1MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcVmlzaWJpbGl0eQB2aXNpYmlsaXR5IjtzOjY6InB1YmxpYyI7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABkb2NCbG9jayI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrIjo3OntzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAHN1bW1hcnkiO3M6MDoiIjtzOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGRlc2NyaXB0aW9uIjtPOjQ1OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24iOjI6e3M6NTk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24AYm9keVRlbXBsYXRlIjtzOjA6IiI7czo1MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9ja1xEZXNjcmlwdGlvbgB0YWdzIjthOjA6e319czozOToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawB0YWdzIjthOjE6e2k6MDtPOjQ2OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcVGFnc1xHZW5lcmljIjoyOntzOjc6IgAqAG5hbWUiO3M6MTg6ImNvZGVDb3ZlcmFnZUlnbm9yZSI7czoxNDoiACoAZGVzY3JpcHRpb24iO047fX1zOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGNvbnRleHQiO086Mzg6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xDb250ZXh0IjoyOntzOjQ5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXENvbnRleHQAbmFtZXNwYWNlIjtzOjA6IiI7czo1NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xDb250ZXh0AG5hbWVzcGFjZUFsaWFzZXMiO2E6MDp7fX1zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGxvY2F0aW9uIjtOO3M6NTA6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAaXNUZW1wbGF0ZVN0YXJ0IjtiOjA7czo0ODoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBpc1RlbXBsYXRlRW5kIjtiOjA7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABhYnN0cmFjdCI7YjowO3M6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABzdGF0aWMiO2I6MDtzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZmluYWwiO2I6MDtzOjU3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAaGFzUmV0dXJuQnlSZWZlcmVuY2UiO2I6MDtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAbWV0YWRhdGEiO2E6MDp7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABhdHRyaWJ1dGVzIjthOjA6e319czo2MzoiXF9fVHdpZ1RlbXBsYXRlX2MyM2ZlYzQ5ZTc4OGViMGVjZWIxNTBmMjk5YzE2NWRjOjppc1RyYWl0YWJsZSgpIjtPOjM1OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZCI6MTM6e3M6NDY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABhcmd1bWVudHMiO2E6MDp7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABsb2NhdGlvbiI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uIjoyOntzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGxpbmVOdW1iZXIiO2k6NzY4O3M6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AY29sdW1uTnVtYmVyIjtpOjM5NzQxO31zOjQ4OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZW5kTG9jYXRpb24iO086MzM6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbiI6Mjp7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBsaW5lTnVtYmVyIjtpOjc3MTtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGNvbHVtbk51bWJlciI7aTozOTgwMzt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAHJldHVyblR5cGUiO086Mzc6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xNaXhlZF8iOjA6e31zOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZnFzZW4iO086MzA6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbiI6Mjp7czozNzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBmcXNlbiI7czo2MzoiXF9fVHdpZ1RlbXBsYXRlX2MyM2ZlYzQ5ZTc4OGViMGVjZWIxNTBmMjk5YzE2NWRjOjppc1RyYWl0YWJsZSgpIjtzOjM2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAG5hbWUiO3M6MTE6ImlzVHJhaXRhYmxlIjt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAHZpc2liaWxpdHkiO086Mzk6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcVmlzaWJpbGl0eSI6MTp7czo1MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcVmlzaWJpbGl0eQB2aXNpYmlsaXR5IjtzOjY6InB1YmxpYyI7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABkb2NCbG9jayI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrIjo3OntzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAHN1bW1hcnkiO3M6MDoiIjtzOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGRlc2NyaXB0aW9uIjtPOjQ1OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24iOjI6e3M6NTk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24AYm9keVRlbXBsYXRlIjtzOjA6IiI7czo1MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9ja1xEZXNjcmlwdGlvbgB0YWdzIjthOjA6e319czozOToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawB0YWdzIjthOjE6e2k6MDtPOjQ2OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcVGFnc1xHZW5lcmljIjoyOntzOjc6IgAqAG5hbWUiO3M6MTg6ImNvZGVDb3ZlcmFnZUlnbm9yZSI7czoxNDoiACoAZGVzY3JpcHRpb24iO047fX1zOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGNvbnRleHQiO086Mzg6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xDb250ZXh0IjoyOntzOjQ5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXENvbnRleHQAbmFtZXNwYWNlIjtzOjA6IiI7czo1NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xDb250ZXh0AG5hbWVzcGFjZUFsaWFzZXMiO2E6MDp7fX1zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGxvY2F0aW9uIjtOO3M6NTA6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAaXNUZW1wbGF0ZVN0YXJ0IjtiOjA7czo0ODoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBpc1RlbXBsYXRlRW5kIjtiOjA7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABhYnN0cmFjdCI7YjowO3M6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABzdGF0aWMiO2I6MDtzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZmluYWwiO2I6MDtzOjU3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAaGFzUmV0dXJuQnlSZWZlcmVuY2UiO2I6MDtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAbWV0YWRhdGEiO2E6MDp7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABhdHRyaWJ1dGVzIjthOjA6e319czo2NDoiXF9fVHdpZ1RlbXBsYXRlX2MyM2ZlYzQ5ZTc4OGViMGVjZWIxNTBmMjk5YzE2NWRjOjpnZXREZWJ1Z0luZm8oKSI7TzozNToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QiOjEzOntzOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAYXJndW1lbnRzIjthOjA6e31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAbG9jYXRpb24iO086MzM6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbiI6Mjp7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBsaW5lTnVtYmVyIjtpOjc3NjtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGNvbHVtbk51bWJlciI7aTozOTg1Mzt9czo0ODoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGVuZExvY2F0aW9uIjtPOjMzOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24iOjI6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AbGluZU51bWJlciI7aTo3Nzk7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBjb2x1bW5OdW1iZXIiO2k6NDAxNDg7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZAByZXR1cm5UeXBlIjtPOjM3OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcTWl4ZWRfIjowOnt9czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGZxc2VuIjtPOjMwOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4iOjI6e3M6Mzc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AZnFzZW4iO3M6NjQ6IlxfX1R3aWdUZW1wbGF0ZV9jMjNmZWM0OWU3ODhlYjBlY2ViMTUwZjI5OWMxNjVkYzo6Z2V0RGVidWdJbmZvKCkiO3M6MzY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AbmFtZSI7czoxMjoiZ2V0RGVidWdJbmZvIjt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAHZpc2liaWxpdHkiO086Mzk6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcVmlzaWJpbGl0eSI6MTp7czo1MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcVmlzaWJpbGl0eQB2aXNpYmlsaXR5IjtzOjY6InB1YmxpYyI7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABkb2NCbG9jayI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrIjo3OntzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAHN1bW1hcnkiO3M6MDoiIjtzOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGRlc2NyaXB0aW9uIjtPOjQ1OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24iOjI6e3M6NTk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24AYm9keVRlbXBsYXRlIjtzOjA6IiI7czo1MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9ja1xEZXNjcmlwdGlvbgB0YWdzIjthOjA6e319czozOToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawB0YWdzIjthOjE6e2k6MDtPOjQ2OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcVGFnc1xHZW5lcmljIjoyOntzOjc6IgAqAG5hbWUiO3M6MTg6ImNvZGVDb3ZlcmFnZUlnbm9yZSI7czoxNDoiACoAZGVzY3JpcHRpb24iO047fX1zOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGNvbnRleHQiO086Mzg6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xDb250ZXh0IjoyOntzOjQ5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXENvbnRleHQAbmFtZXNwYWNlIjtzOjA6IiI7czo1NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xDb250ZXh0AG5hbWVzcGFjZUFsaWFzZXMiO2E6MDp7fX1zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGxvY2F0aW9uIjtOO3M6NTA6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAaXNUZW1wbGF0ZVN0YXJ0IjtiOjA7czo0ODoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBpc1RlbXBsYXRlRW5kIjtiOjA7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABhYnN0cmFjdCI7YjowO3M6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABzdGF0aWMiO2I6MDtzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZmluYWwiO2I6MDtzOjU3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAaGFzUmV0dXJuQnlSZWZlcmVuY2UiO2I6MDtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAbWV0YWRhdGEiO2E6MDp7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABhdHRyaWJ1dGVzIjthOjA6e319czo2ODoiXF9fVHdpZ1RlbXBsYXRlX2MyM2ZlYzQ5ZTc4OGViMGVjZWIxNTBmMjk5YzE2NWRjOjpnZXRTb3VyY2VDb250ZXh0KCkiO086MzU6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kIjoxMzp7czo0NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGFyZ3VtZW50cyI7YTowOnt9czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGxvY2F0aW9uIjtPOjMzOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24iOjI6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AbGluZU51bWJlciI7aTo3ODE7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBjb2x1bW5OdW1iZXIiO2k6NDAxNTU7fXM6NDg6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABlbmRMb2NhdGlvbiI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uIjoyOntzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGxpbmVOdW1iZXIiO2k6MTQ0MDtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGNvbHVtbk51bWJlciI7aTo3MjIyMzt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAHJldHVyblR5cGUiO086Mzc6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xNaXhlZF8iOjA6e31zOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZnFzZW4iO086MzA6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbiI6Mjp7czozNzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBmcXNlbiI7czo2ODoiXF9fVHdpZ1RlbXBsYXRlX2MyM2ZlYzQ5ZTc4OGViMGVjZWIxNTBmMjk5YzE2NWRjOjpnZXRTb3VyY2VDb250ZXh0KCkiO3M6MzY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AbmFtZSI7czoxNjoiZ2V0U291cmNlQ29udGV4dCI7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZAB2aXNpYmlsaXR5IjtPOjM5OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXFZpc2liaWxpdHkiOjE6e3M6NTE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXFZpc2liaWxpdHkAdmlzaWJpbGl0eSI7czo2OiJwdWJsaWMiO31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZG9jQmxvY2siO047czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGFic3RyYWN0IjtiOjA7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAHN0YXRpYyI7YjowO3M6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABmaW5hbCI7YjowO3M6NTc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABoYXNSZXR1cm5CeVJlZmVyZW5jZSI7YjowO3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABtZXRhZGF0YSI7YTowOnt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGF0dHJpYnV0ZXMiO2E6MDp7fX19czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAHVzZWRUcmFpdHMiO2E6MDp7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBsb2NhdGlvbiI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uIjoyOntzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGxpbmVOdW1iZXIiO2k6MTc7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBjb2x1bW5OdW1iZXIiO2k6MDt9czo0ODoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAGVuZExvY2F0aW9uIjtPOjMzOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24iOjI6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AbGluZU51bWJlciI7aToxNDQxO3M6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AY29sdW1uTnVtYmVyIjtpOjA7fXM6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBmcXNlbiI7TzozMDoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuIjoyOntzOjM3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAGZxc2VuIjtzOjQ4OiJcX19Ud2lnVGVtcGxhdGVfYzIzZmVjNDllNzg4ZWIwZWNlYjE1MGYyOTljMTY1ZGMiO3M6MzY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AbmFtZSI7czo0NzoiX19Ud2lnVGVtcGxhdGVfYzIzZmVjNDllNzg4ZWIwZWNlYjE1MGYyOTljMTY1ZGMiO31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AZG9jQmxvY2siO047czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAHBhcmVudCI7TzozMDoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuIjoyOntzOjM3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAGZxc2VuIjtzOjE0OiJcVHdpZ1xUZW1wbGF0ZSI7czozNjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBuYW1lIjtzOjg6IlRlbXBsYXRlIjt9czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAGFic3RyYWN0IjtiOjA7czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAGZpbmFsIjtiOjA7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAHJlYWRPbmx5IjtiOjA7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAG1ldGFkYXRhIjthOjA6e31zOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AYXR0cmlidXRlcyI7YTowOnt9fX1zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGludGVyZmFjZXMiO2E6MDp7fXM6NDE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAdHJhaXRzIjthOjA6e31zOjQwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGVudW1zIjthOjA6e31zOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6ImQ4NzRlM2FhODZhN2RkYzQzMjk3YTBiOTc3ZjZjYzM3IjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHBhdGgiO3M6NTg6InZhci9jYWNoZS9kZXYvdHdpZy9mZC9mZDYwMjQ0ZWQ2Zjk2YjY3ZDU1MDE2ZmNkOTBjNTE2OC5waHAiO3M6NDE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAc291cmNlIjtzOjcyMjI3OiI8P3BocAoKdXNlIFR3aWdcRW52aXJvbm1lbnQ7CnVzZSBUd2lnXEVycm9yXExvYWRlckVycm9yOwp1c2UgVHdpZ1xFcnJvclxSdW50aW1lRXJyb3I7CnVzZSBUd2lnXEV4dGVuc2lvblxDb3JlRXh0ZW5zaW9uOwp1c2UgVHdpZ1xFeHRlbnNpb25cU2FuZGJveEV4dGVuc2lvbjsKdXNlIFR3aWdcTWFya3VwOwp1c2UgVHdpZ1xTYW5kYm94XFNlY3VyaXR5RXJyb3I7CnVzZSBUd2lnXFNhbmRib3hcU2VjdXJpdHlOb3RBbGxvd2VkVGFnRXJyb3I7CnVzZSBUd2lnXFNhbmRib3hcU2VjdXJpdHlOb3RBbGxvd2VkRmlsdGVyRXJyb3I7CnVzZSBUd2lnXFNhbmRib3hcU2VjdXJpdHlOb3RBbGxvd2VkRnVuY3Rpb25FcnJvcjsKdXNlIFR3aWdcU291cmNlOwp1c2UgVHdpZ1xUZW1wbGF0ZTsKCi8qIEBXZWJQcm9maWxlci9Qcm9maWxlci90b29sYmFyX2pzLmh0bWwudHdpZyAqLwpjbGFzcyBfX1R3aWdUZW1wbGF0ZV9jMjNmZWM0OWU3ODhlYjBlY2ViMTUwZjI5OWMxNjVkYyBleHRlbmRzIFRlbXBsYXRlCnsKICAgIHByaXZhdGUgJHNvdXJjZTsKICAgIHByaXZhdGUgJG1hY3JvcyA9IFtdOwoKICAgIHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdChFbnZpcm9ubWVudCAkZW52KQogICAgewogICAgICAgIHBhcmVudDo6X19jb25zdHJ1Y3QoJGVudik7CgogICAgICAgICR0aGlzLT5zb3VyY2UgPSAkdGhpcy0+Z2V0U291cmNlQ29udGV4dCgpOwoKICAgICAgICAkdGhpcy0+cGFyZW50ID0gZmFsc2U7CgogICAgICAgICR0aGlzLT5ibG9ja3MgPSBbCiAgICAgICAgXTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gZG9EaXNwbGF5KGFycmF5ICRjb250ZXh0LCBhcnJheSAkYmxvY2tzID0gW10pCiAgICB7CiAgICAgICAgJG1hY3JvcyA9ICR0aGlzLT5tYWNyb3M7CiAgICAgICAgJF9faW50ZXJuYWxfNWEyN2E4YmEyMWNhNzliNjE5MzIzNzZiMmZhOTIyZDIgPSAkdGhpcy0+ZXh0ZW5zaW9uc1siU3ltZm9ueVxcQnVuZGxlXFxXZWJQcm9maWxlckJ1bmRsZVxcVHdpZ1xcV2ViUHJvZmlsZXJFeHRlbnNpb24iXTsKICAgICAgICAkX19pbnRlcm5hbF81YTI3YThiYTIxY2E3OWI2MTkzMjM3NmIyZmE5MjJkMi0+ZW50ZXIoJF9faW50ZXJuYWxfNWEyN2E4YmEyMWNhNzliNjE5MzIzNzZiMmZhOTIyZDJfcHJvZiA9IG5ldyBcVHdpZ1xQcm9maWxlclxQcm9maWxlKCR0aGlzLT5nZXRUZW1wbGF0ZU5hbWUoKSwgInRlbXBsYXRlIiwgIkBXZWJQcm9maWxlci9Qcm9maWxlci90b29sYmFyX2pzLmh0bWwudHdpZyIpKTsKCiAgICAgICAgJF9faW50ZXJuYWxfNmY0N2JiZTk5ODNhZjgxZjFlNzQ1MGU5YTNlMzc2OGYgPSAkdGhpcy0+ZXh0ZW5zaW9uc1siU3ltZm9ueVxcQnJpZGdlXFxUd2lnXFxFeHRlbnNpb25cXFByb2ZpbGVyRXh0ZW5zaW9uIl07CiAgICAgICAgJF9faW50ZXJuYWxfNmY0N2JiZTk5ODNhZjgxZjFlNzQ1MGU5YTNlMzc2OGYtPmVudGVyKCRfX2ludGVybmFsXzZmNDdiYmU5OTgzYWY4MWYxZTc0NTBlOWEzZTM3NjhmX3Byb2YgPSBuZXcgXFR3aWdcUHJvZmlsZXJcUHJvZmlsZSgkdGhpcy0+Z2V0VGVtcGxhdGVOYW1lKCksICJ0ZW1wbGF0ZSIsICJAV2ViUHJvZmlsZXIvUHJvZmlsZXIvdG9vbGJhcl9qcy5odG1sLnR3aWciKSk7CgogICAgICAgIC8vIGxpbmUgMQogICAgICAgIHlpZWxkICI8ZGl2IGlkPVwic2Z3ZHQiOwogICAgICAgIHlpZWxkICR0aGlzLT5lbnYtPmdldFJ1bnRpbWUoJ1R3aWdcUnVudGltZVxFc2NhcGVyUnVudGltZScpLT5lc2NhcGUoKGlzc2V0KCRjb250ZXh0WyJ0b2tlbiJdKSB8fCBhcnJheV9rZXlfZXhpc3RzKCJ0b2tlbiIsICRjb250ZXh0KSA/ICRjb250ZXh0WyJ0b2tlbiJdIDogKGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcignVmFyaWFibGUgInRva2VuIiBkb2VzIG5vdCBleGlzdC4nLCAxLCAkdGhpcy0+c291cmNlKTsgfSkoKSksICJodG1sIiwgbnVsbCwgdHJ1ZSk7CiAgICAgICAgeWllbGQgIlwiIGNsYXNzPVwic2YtdG9vbGJhciBzZi1kaXNwbGF5LW5vbmVcIiByb2xlPVwicmVnaW9uXCIgYXJpYS1sYWJlbD1cIlN5bWZvbnkgV2ViIERlYnVnIFRvb2xiYXJcIj4KICAgICI7CiAgICAgICAgLy8gbGluZSAyCiAgICAgICAgeWllbGQgVHdpZ1xFeHRlbnNpb25cQ29yZUV4dGVuc2lvbjo6aW5jbHVkZSgkdGhpcy0+ZW52LCAkY29udGV4dCwgIkBXZWJQcm9maWxlci9Qcm9maWxlci90b29sYmFyLmh0bWwudHdpZyIsIFsidGVtcGxhdGVzIiA9PiBbInJlcXVlc3QiID0+ICJAV2ViUHJvZmlsZXIvUHJvZmlsZXIvY2FuY2VsLmh0bWwudHdpZyJdLCAicHJvZmlsZSIgPT4gbnVsbCwgInByb2ZpbGVyX3VybCIgPT4gJHRoaXMtPmV4dGVuc2lvbnNbJ1N5bWZvbnlcQnJpZGdlXFR3aWdcRXh0ZW5zaW9uXFJvdXRpbmdFeHRlbnNpb24nXS0+Z2V0VXJsKCJfcHJvZmlsZXIiLCBbInRva2VuIiA9PiAgICAgICAgIC8vIGxpbmUgNwooaXNzZXQoJGNvbnRleHRbInRva2VuIl0pIHx8IGFycmF5X2tleV9leGlzdHMoInRva2VuIiwgJGNvbnRleHQpID8gJGNvbnRleHRbInRva2VuIl0gOiAoZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgUnVudGltZUVycm9yKCdWYXJpYWJsZSAidG9rZW4iIGRvZXMgbm90IGV4aXN0LicsIDcsICR0aGlzLT5zb3VyY2UpOyB9KSgpKV0pLCAicHJvZmlsZXJfbWFya3VwX3ZlcnNpb24iID0+IDNdKTsKICAgICAgICAvLyBsaW5lIDkKICAgICAgICB5aWVsZCAiCjwvZGl2PgoKPHN0eWxlIjsKICAgICAgICAvLyBsaW5lIDEyCiAgICAgICAgaWYgKChpc3NldCgkY29udGV4dFsiY3NwX3N0eWxlX25vbmNlIl0pIHx8IGFycmF5X2tleV9leGlzdHMoImNzcF9zdHlsZV9ub25jZSIsICRjb250ZXh0KSA/ICRjb250ZXh0WyJjc3Bfc3R5bGVfbm9uY2UiXSA6IChmdW5jdGlvbiAoKSB7IHRocm93IG5ldyBSdW50aW1lRXJyb3IoJ1ZhcmlhYmxlICJjc3Bfc3R5bGVfbm9uY2UiIGRvZXMgbm90IGV4aXN0LicsIDEyLCAkdGhpcy0+c291cmNlKTsgfSkoKSkpIHsKICAgICAgICAgICAgeWllbGQgIiBub25jZT1cIiI7CiAgICAgICAgICAgIHlpZWxkICR0aGlzLT5lbnYtPmdldFJ1bnRpbWUoJ1R3aWdcUnVudGltZVxFc2NhcGVyUnVudGltZScpLT5lc2NhcGUoKGlzc2V0KCRjb250ZXh0WyJjc3Bfc3R5bGVfbm9uY2UiXSkgfHwgYXJyYXlfa2V5X2V4aXN0cygiY3NwX3N0eWxlX25vbmNlIiwgJGNvbnRleHQpID8gJGNvbnRleHRbImNzcF9zdHlsZV9ub25jZSJdIDogKGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcignVmFyaWFibGUgImNzcF9zdHlsZV9ub25jZSIgZG9lcyBub3QgZXhpc3QuJywgMTIsICR0aGlzLT5zb3VyY2UpOyB9KSgpKSwgImh0bWwiLCBudWxsLCB0cnVlKTsKICAgICAgICAgICAgeWllbGQgIlwiIjsKICAgICAgICB9CiAgICAgICAgeWllbGQgIj4KICAgICI7CiAgICAgICAgLy8gbGluZSAxMwogICAgICAgIHlpZWxkIFR3aWdcRXh0ZW5zaW9uXENvcmVFeHRlbnNpb246OmluY2x1ZGUoJHRoaXMtPmVudiwgJGNvbnRleHQsICJAV2ViUHJvZmlsZXIvUHJvZmlsZXIvdG9vbGJhci5jc3MudHdpZyIpOwogICAgICAgIHlpZWxkICIKPC9zdHlsZT4KCiI7CiAgICAgICAgLy8gbGluZSAxOQogICAgICAgIHlpZWxkICI8c2NyaXB0IjsKICAgICAgICBpZiAoKGFycmF5X2tleV9leGlzdHMoImNzcF9zY3JpcHRfbm9uY2UiLCAkY29udGV4dCkgJiYgKGlzc2V0KCRjb250ZXh0WyJjc3Bfc2NyaXB0X25vbmNlIl0pIHx8IGFycmF5X2tleV9leGlzdHMoImNzcF9zY3JpcHRfbm9uY2UiLCAkY29udGV4dCkgPyAkY29udGV4dFsiY3NwX3NjcmlwdF9ub25jZSJdIDogKGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcignVmFyaWFibGUgImNzcF9zY3JpcHRfbm9uY2UiIGRvZXMgbm90IGV4aXN0LicsIDE5LCAkdGhpcy0+c291cmNlKTsgfSkoKSkpKSB7CiAgICAgICAgICAgIHlpZWxkICIgbm9uY2U9XCIiOwogICAgICAgICAgICB5aWVsZCAkdGhpcy0+ZW52LT5nZXRSdW50aW1lKCdUd2lnXFJ1bnRpbWVcRXNjYXBlclJ1bnRpbWUnKS0+ZXNjYXBlKChpc3NldCgkY29udGV4dFsiY3NwX3NjcmlwdF9ub25jZSJdKSB8fCBhcnJheV9rZXlfZXhpc3RzKCJjc3Bfc2NyaXB0X25vbmNlIiwgJGNvbnRleHQpID8gJGNvbnRleHRbImNzcF9zY3JpcHRfbm9uY2UiXSA6IChmdW5jdGlvbiAoKSB7IHRocm93IG5ldyBSdW50aW1lRXJyb3IoJ1ZhcmlhYmxlICJjc3Bfc2NyaXB0X25vbmNlIiBkb2VzIG5vdCBleGlzdC4nLCAxOSwgJHRoaXMtPnNvdXJjZSk7IH0pKCkpLCAiaHRtbCIsIG51bGwsIHRydWUpOwogICAgICAgICAgICB5aWVsZCAiXCIiOwogICAgICAgIH0KICAgICAgICB5aWVsZCAiPi8qPCFbQ0RBVEFbKi8KICAgIGlmICh0eXBlb2YgU2ZqcyA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIFNmanMubG9hZFRvb2xiYXIgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgU2ZqcyA9IChmdW5jdGlvbigpIHsKICAgICAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7CgogICAgICAgICAgICBpZiAoJ2NsYXNzTGlzdCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7CiAgICAgICAgICAgICAgICB2YXIgaGFzQ2xhc3MgPSBmdW5jdGlvbiAoZWwsIGNzc0NsYXNzKSB7IHJldHVybiBlbC5jbGFzc0xpc3QuY29udGFpbnMoY3NzQ2xhc3MpOyB9OwogICAgICAgICAgICAgICAgdmFyIHJlbW92ZUNsYXNzID0gZnVuY3Rpb24oZWwsIGNzc0NsYXNzKSB7IGVsLmNsYXNzTGlzdC5yZW1vdmUoY3NzQ2xhc3MpOyB9OwogICAgICAgICAgICAgICAgdmFyIGFkZENsYXNzID0gZnVuY3Rpb24oZWwsIGNzc0NsYXNzKSB7IGVsLmNsYXNzTGlzdC5hZGQoY3NzQ2xhc3MpOyB9OwogICAgICAgICAgICAgICAgdmFyIHRvZ2dsZUNsYXNzID0gZnVuY3Rpb24oZWwsIGNzc0NsYXNzKSB7IGVsLmNsYXNzTGlzdC50b2dnbGUoY3NzQ2xhc3MpOyB9OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdmFyIGhhc0NsYXNzID0gZnVuY3Rpb24gKGVsLCBjc3NDbGFzcykgeyByZXR1cm4gZWwuY2xhc3NOYW1lLm1hdGNoKG5ldyBSZWdFeHAoJ1xcXFxiJyArIGNzc0NsYXNzICsgJ1xcXFxiJykpOyB9OwogICAgICAgICAgICAgICAgdmFyIHJlbW92ZUNsYXNzID0gZnVuY3Rpb24oZWwsIGNzc0NsYXNzKSB7IGVsLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoJ1xcXFxiJyArIGNzc0NsYXNzICsgJ1xcXFxiJyksICcgJyk7IH07CiAgICAgICAgICAgICAgICB2YXIgYWRkQ2xhc3MgPSBmdW5jdGlvbihlbCwgY3NzQ2xhc3MpIHsgaWYgKCFoYXNDbGFzcyhlbCwgY3NzQ2xhc3MpKSB7IGVsLmNsYXNzTmFtZSArPSBcIiBcIiArIGNzc0NsYXNzOyB9IH07CiAgICAgICAgICAgICAgICB2YXIgdG9nZ2xlQ2xhc3MgPSBmdW5jdGlvbihlbCwgY3NzQ2xhc3MpIHsgaGFzQ2xhc3MoZWwsIGNzc0NsYXNzKSA/IHJlbW92ZUNsYXNzKGVsLCBjc3NDbGFzcykgOiBhZGRDbGFzcyhlbCwgY3NzQ2xhc3MpOyB9OwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgbm9vcCA9IGZ1bmN0aW9uKCkge307CgogICAgICAgICAgICB2YXIgcHJvZmlsZXJTdG9yYWdlS2V5ID0gJ3N5bWZvbnkvcHJvZmlsZXIvJzsKCiAgICAgICAgICAgIHZhciBhZGRFdmVudExpc3RlbmVyOwoKICAgICAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGlmICghKCdhZGRFdmVudExpc3RlbmVyJyBpbiBlbCkpIHsKICAgICAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZWxlbWVudCwgZXZlbnROYW1lLCBjYWxsYmFjaykgewogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXR0YWNoRXZlbnQoJ29uJyArIGV2ZW50TmFtZSwgY2FsbGJhY2spOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZWxlbWVudCwgZXZlbnROYW1lLCBjYWxsYmFjaykgewogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGNhbGxiYWNrLCBmYWxzZSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgcmVxdWVzdCA9IGZ1bmN0aW9uKHVybCwgb25TdWNjZXNzLCBvbkVycm9yLCBwYXlsb2FkLCBvcHRpb25zLCB0cmllcykgewogICAgICAgICAgICAgICAgdmFyIHhociA9IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCA/IG5ldyBYTUxIdHRwUmVxdWVzdCgpIDogbmV3IEFjdGl2ZVhPYmplY3QoJ01pY3Jvc29mdC5YTUxIVFRQJyk7CiAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKICAgICAgICAgICAgICAgIG9wdGlvbnMucmV0cnkgPSBvcHRpb25zLnJldHJ5IHx8IGZhbHNlOwogICAgICAgICAgICAgICAgdHJpZXMgPSB0cmllcyB8fCAxOwogICAgICAgICAgICAgICAgLyogdGhpcyBkZWxheXMgZm9yIDEyNSwgMzc1LCA2MjUsIDg3NSwgYW5kIDEwMDAsIC4uLiAqLwogICAgICAgICAgICAgICAgdmFyIGRlbGF5ID0gdHJpZXMgPCA1ID8gKHRyaWVzIC0gMC41KSAqIDI1MCA6IDEwMDA7CgogICAgICAgICAgICAgICAgeGhyLm9wZW4ob3B0aW9ucy5tZXRob2QgfHwgJ0dFVCcsIHVybCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignWC1SZXF1ZXN0ZWQtV2l0aCcsICdYTUxIdHRwUmVxdWVzdCcpOwogICAgICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKDQgIT09IHhoci5yZWFkeVN0YXRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT0gNDA0ICYmIG9wdGlvbnMucmV0cnkgJiYgIW9wdGlvbnMuc3RvcCkgewogICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3RvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QodXJsLCBvblN1Y2Nlc3MsIG9uRXJyb3IsIHBheWxvYWQsIG9wdGlvbnMsIHRyaWVzICsgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGRlbGF5KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKDIwMCA9PT0geGhyLnN0YXR1cykgewogICAgICAgICAgICAgICAgICAgICAgICAob25TdWNjZXNzIHx8IG5vb3ApKHhocik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgKG9uRXJyb3IgfHwgbm9vcCkoeGhyKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uU2VuZCkgewogICAgICAgICAgICAgICAgICAgIG9wdGlvbnMub25TZW5kKHRyaWVzKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB4aHIuc2VuZChwYXlsb2FkIHx8ICcnKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHZhciBnZXRQcmVmZXJlbmNlID0gZnVuY3Rpb24obmFtZSkgewogICAgICAgICAgICAgICAgaWYgKCF3aW5kb3cubG9jYWxTdG9yYWdlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKHByb2ZpbGVyU3RvcmFnZUtleSArIG5hbWUpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIHNldFByZWZlcmVuY2UgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkgewogICAgICAgICAgICAgICAgaWYgKCF3aW5kb3cubG9jYWxTdG9yYWdlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0ocHJvZmlsZXJTdG9yYWdlS2V5ICsgbmFtZSwgdmFsdWUpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIHJlcXVlc3RTdGFjayA9IFtdOwoKICAgICAgICAgICAgdmFyIGV4dHJhY3RIZWFkZXJzID0gZnVuY3Rpb24oeGhyLCBzdGFja0VsZW1lbnQpIHsKICAgICAgICAgICAgICAgIC8qIEhlcmUgd2UgYXZvaWQgdG8gY2FsbCB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIgaW4gb3JkZXIgdG8gKi8KICAgICAgICAgICAgICAgIC8qIHByZXZlbnQgcG9sbHV0aW5nIHRoZSBjb25zb2xlIHdpdGggQ09SUyBzZWN1cml0eSBlcnJvcnMgKi8KICAgICAgICAgICAgICAgIHZhciBhbGxIZWFkZXJzID0geGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpOwogICAgICAgICAgICAgICAgdmFyIHJldDsKCiAgICAgICAgICAgICAgICBpZiAocmV0ID0gYWxsSGVhZGVycy5tYXRjaCgvXngtZGVidWctdG9rZW46XFxzKyguKilcJC9pbSkpIHsKICAgICAgICAgICAgICAgICAgICBzdGFja0VsZW1lbnQucHJvZmlsZSA9IHJldFsxXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChyZXQgPSBhbGxIZWFkZXJzLm1hdGNoKC9eeC1kZWJ1Zy10b2tlbi1saW5rOlxccysoLiopXCQvaW0pKSB7CiAgICAgICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LnByb2ZpbGVyVXJsID0gcmV0WzFdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHJldCA9IGFsbEhlYWRlcnMubWF0Y2goL15TeW1mb255LURlYnVnLVRvb2xiYXItUmVwbGFjZTpcXHMrKC4qKVwkL2ltKSkgewogICAgICAgICAgICAgICAgICAgIHN0YWNrRWxlbWVudC50b29sYmFyUmVwbGFjZUZpbmlzaGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LnRvb2xiYXJSZXBsYWNlID0gJzEnID09PSByZXRbMV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB2YXIgc3VjY2Vzc1N0cmVhayA9IDQ7CiAgICAgICAgICAgIHZhciBwZW5kaW5nUmVxdWVzdHMgPSAwOwogICAgICAgICAgICB2YXIgcmVuZGVyQWpheFJlcXVlc3RzID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdENvdW50ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2YtdG9vbGJhci1hamF4LXJlcXVlc3QtY291bnRlcicpOwogICAgICAgICAgICAgICAgaWYgKCFyZXF1ZXN0Q291bnRlcikgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJlcXVlc3RDb3VudGVyLnRleHRDb250ZW50ID0gcmVxdWVzdFN0YWNrLmxlbmd0aDsKCiAgICAgICAgICAgICAgICB2YXIgaW5mb1NwYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNmLXRvb2xiYXItYWpheC1pbmZvXCIpOwogICAgICAgICAgICAgICAgaWYgKGluZm9TcGFuKSB7CiAgICAgICAgICAgICAgICAgICAgaW5mb1NwYW4udGV4dENvbnRlbnQgPSByZXF1ZXN0U3RhY2subGVuZ3RoICsgJyBBSkFYIHJlcXVlc3QnICsgKHJlcXVlc3RTdGFjay5sZW5ndGggIT09IDEgPyAncycgOiAnJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIGFqYXhUb29sYmFyUGFuZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2YtdG9vbGJhci1ibG9jay1hamF4Jyk7CiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdFN0YWNrLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIGFqYXhUb29sYmFyUGFuZWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGFqYXhUb29sYmFyUGFuZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nUmVxdWVzdHMgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgYWRkQ2xhc3MoYWpheFRvb2xiYXJQYW5lbCwgJ3NmLWFqYXgtcmVxdWVzdC1sb2FkaW5nJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN1Y2Nlc3NTdHJlYWsgPCA0KSB7CiAgICAgICAgICAgICAgICAgICAgYWRkQ2xhc3MoYWpheFRvb2xiYXJQYW5lbCwgJ3NmLXRvb2xiYXItc3RhdHVzLXJlZCcpOwogICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGFqYXhUb29sYmFyUGFuZWwsICdzZi1hamF4LXJlcXVlc3QtbG9hZGluZycpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyhhamF4VG9vbGJhclBhbmVsLCAnc2YtYWpheC1yZXF1ZXN0LWxvYWRpbmcnKTsKICAgICAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyhhamF4VG9vbGJhclBhbmVsLCAnc2YtdG9vbGJhci1zdGF0dXMtcmVkJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB2YXIgc3RhcnRBamF4UmVxdWVzdCA9IGZ1bmN0aW9uKGluZGV4KSB7CiAgICAgICAgICAgICAgICB2YXIgdGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2YtdG9vbGJhci1hamF4LXJlcXVlc3QtbGlzdCcpOwogICAgICAgICAgICAgICAgaWYgKCF0Ym9keSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgbmJPZkFqYXhSZXF1ZXN0ID0gdGJvZHkucm93cy5sZW5ndGg7CiAgICAgICAgICAgICAgICBpZiAobmJPZkFqYXhSZXF1ZXN0ID49IDEwMCkgewogICAgICAgICAgICAgICAgICAgIHRib2R5LmRlbGV0ZVJvdygwKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdCA9IHJlcXVlc3RTdGFja1tpbmRleF07CiAgICAgICAgICAgICAgICBwZW5kaW5nUmVxdWVzdHMrKzsKICAgICAgICAgICAgICAgIHZhciByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOwogICAgICAgICAgICAgICAgcmVxdWVzdC5ET01Ob2RlID0gcm93OwoKICAgICAgICAgICAgICAgIHZhciByZXF1ZXN0TnVtYmVyQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7CiAgICAgICAgICAgICAgICByZXF1ZXN0TnVtYmVyQ2VsbC50ZXh0Q29udGVudCA9IGluZGV4ICsgMTsKICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChyZXF1ZXN0TnVtYmVyQ2VsbCk7CgogICAgICAgICAgICAgICAgdmFyIHByb2ZpbGVyQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7CiAgICAgICAgICAgICAgICBwcm9maWxlckNlbGwudGV4dENvbnRlbnQgPSAnbi9hJzsKICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChwcm9maWxlckNlbGwpOwoKICAgICAgICAgICAgICAgIHZhciBtZXRob2RDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKICAgICAgICAgICAgICAgIG1ldGhvZENlbGwudGV4dENvbnRlbnQgPSByZXF1ZXN0Lm1ldGhvZDsKICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChtZXRob2RDZWxsKTsKCiAgICAgICAgICAgICAgICB2YXIgdHlwZUNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICAgICAgdHlwZUNlbGwudGV4dENvbnRlbnQgPSByZXF1ZXN0LnR5cGU7CiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQodHlwZUNlbGwpOwoKICAgICAgICAgICAgICAgIHZhciBzdGF0dXNDb2RlQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7CiAgICAgICAgICAgICAgICB2YXIgc3RhdHVzQ29kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgICAgICAgIHN0YXR1c0NvZGUudGV4dENvbnRlbnQgPSAnbi9hJzsKICAgICAgICAgICAgICAgIHN0YXR1c0NvZGVDZWxsLmFwcGVuZENoaWxkKHN0YXR1c0NvZGUpOwogICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKHN0YXR1c0NvZGVDZWxsKTsKCiAgICAgICAgICAgICAgICB2YXIgcGF0aENlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICAgICAgcGF0aENlbGwuY2xhc3NOYW1lID0gJ3NmLWFqYXgtcmVxdWVzdC11cmwnOwogICAgICAgICAgICAgICAgaWYgKCdHRVQnID09PSByZXF1ZXN0Lm1ldGhvZCkgewogICAgICAgICAgICAgICAgICAgIHZhciBwYXRoTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgICAgICAgICBwYXRoTGluay5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCByZXF1ZXN0LnVybCk7CiAgICAgICAgICAgICAgICAgICAgcGF0aExpbmsudGV4dENvbnRlbnQgPSByZXF1ZXN0LnVybDsKICAgICAgICAgICAgICAgICAgICBwYXRoQ2VsbC5hcHBlbmRDaGlsZChwYXRoTGluayk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHBhdGhDZWxsLnRleHRDb250ZW50ID0gcmVxdWVzdC51cmw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBwYXRoQ2VsbC5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgcmVxdWVzdC51cmwpOwogICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKHBhdGhDZWxsKTsKCiAgICAgICAgICAgICAgICB2YXIgZHVyYXRpb25DZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKICAgICAgICAgICAgICAgIGR1cmF0aW9uQ2VsbC5jbGFzc05hbWUgPSAnc2YtYWpheC1yZXF1ZXN0LWR1cmF0aW9uJzsKICAgICAgICAgICAgICAgIGR1cmF0aW9uQ2VsbC50ZXh0Q29udGVudCA9ICduL2EnOwogICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGR1cmF0aW9uQ2VsbCk7CgogICAgICAgICAgICAgICAgcmVxdWVzdC5saXZlRHVyYXRpb25IYW5kbGUgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbkNlbGwudGV4dENvbnRlbnQgPSAobmV3IERhdGUoKSAtIHJlcXVlc3Quc3RhcnQpICsgJyBtcyc7CiAgICAgICAgICAgICAgICB9LCAxMDApOwoKICAgICAgICAgICAgICAgIHJvdy5jbGFzc05hbWUgPSAnc2YtYWpheC1yZXF1ZXN0IHNmLWFqYXgtcmVxdWVzdC1sb2FkaW5nJzsKICAgICAgICAgICAgICAgIHRib2R5Lmluc2VydEJlZm9yZShyb3csIG51bGwpOwoKICAgICAgICAgICAgICAgIHZhciB0b29sYmFySW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZi10b29sYmFyLWJsb2NrLWFqYXggLnNmLXRvb2xiYXItaW5mbycpOwogICAgICAgICAgICAgICAgdG9vbGJhckluZm8uc2Nyb2xsVG9wID0gdG9vbGJhckluZm8uc2Nyb2xsSGVpZ2h0OwoKICAgICAgICAgICAgICAgIHJlbmRlckFqYXhSZXF1ZXN0cygpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIGZpbmlzaEFqYXhSZXF1ZXN0ID0gZnVuY3Rpb24oaW5kZXgpIHsKICAgICAgICAgICAgICAgIHZhciByZXF1ZXN0ID0gcmVxdWVzdFN0YWNrW2luZGV4XTsKICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwocmVxdWVzdC5saXZlRHVyYXRpb25IYW5kbGUpOwoKICAgICAgICAgICAgICAgIGlmICghcmVxdWVzdC5ET01Ob2RlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LnRvb2xiYXJSZXBsYWNlICYmICFyZXF1ZXN0LnRvb2xiYXJSZXBsYWNlRmluaXNoZWQgJiYgcmVxdWVzdC5wcm9maWxlKSB7CiAgICAgICAgICAgICAgICAgICAgLyogRmxhZyBhcyBjb21wbGV0ZSBiZWNhdXNlIGZpbmlzaEFqYXhSZXF1ZXN0IGNhbiBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXMuICovCiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC50b29sYmFyUmVwbGFjZUZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAvKiBTZWFyY2ggdXAgdGhyb3VnaCB0aGUgRE9NIHRvIGZpbmQgdGhlIHRvb2xiYXIncyBjb250YWluZXIgSUQuICovCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZWxlbSA9IHJlcXVlc3QuRE9NTm9kZTsgZWxlbSAmJiBlbGVtICE9PSBkb2N1bWVudDsgZWxlbSA9IGVsZW0ucGFyZW50Tm9kZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbS5pZC5tYXRjaCgvXnNmd2R0LykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNmanMubG9hZFRvb2xiYXIoZWxlbS5pZC5yZXBsYWNlKC9ec2Z3ZHQvLCAnJyksIHJlcXVlc3QucHJvZmlsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBwZW5kaW5nUmVxdWVzdHMtLTsKICAgICAgICAgICAgICAgIHZhciByb3cgPSByZXF1ZXN0LkRPTU5vZGU7CiAgICAgICAgICAgICAgICAvKiBVbnBhY2sgdGhlIGNoaWxkcmVuIGZyb20gdGhlIHJvdyAqLwogICAgICAgICAgICAgICAgdmFyIHByb2ZpbGVyQ2VsbCA9IHJvdy5jaGlsZHJlblsxXTsKICAgICAgICAgICAgICAgIHZhciBtZXRob2RDZWxsID0gcm93LmNoaWxkcmVuWzJdOwogICAgICAgICAgICAgICAgdmFyIHN0YXR1c0NvZGVDZWxsID0gcm93LmNoaWxkcmVuWzRdOwogICAgICAgICAgICAgICAgdmFyIHN0YXR1c0NvZGVFbGVtID0gc3RhdHVzQ29kZUNlbGwuY2hpbGRyZW5bMF07CiAgICAgICAgICAgICAgICB2YXIgZHVyYXRpb25DZWxsID0gcm93LmNoaWxkcmVuWzZdOwoKICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LmVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgcm93LmNsYXNzTmFtZSA9ICdzZi1hamF4LXJlcXVlc3Qgc2YtYWpheC1yZXF1ZXN0LWVycm9yJzsKICAgICAgICAgICAgICAgICAgICBtZXRob2RDZWxsLmNsYXNzTmFtZSA9ICdzZi1hamF4LXJlcXVlc3QtZXJyb3InOwogICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NTdHJlYWsgPSAwOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByb3cuY2xhc3NOYW1lID0gJ3NmLWFqYXgtcmVxdWVzdCBzZi1hamF4LXJlcXVlc3Qtb2snOwogICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NTdHJlYWsrKzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXNDb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzQ29kZSA8IDMwMCkgewogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNDb2RlRWxlbS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3NmLXRvb2xiYXItc3RhdHVzJyk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXF1ZXN0LnN0YXR1c0NvZGUgPCA0MDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzQ29kZUVsZW0uc2V0QXR0cmlidXRlKCdjbGFzcycsICdzZi10b29sYmFyLXN0YXR1cyBzZi10b29sYmFyLXN0YXR1cy15ZWxsb3cnKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNDb2RlRWxlbS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3NmLXRvb2xiYXItc3RhdHVzIHNmLXRvb2xiYXItc3RhdHVzLXJlZCcpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBzdGF0dXNDb2RlRWxlbS50ZXh0Q29udGVudCA9IHJlcXVlc3Quc3RhdHVzQ29kZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzQ29kZUVsZW0uc2V0QXR0cmlidXRlKCdjbGFzcycsICdzZi10b29sYmFyLXN0YXR1cyBzZi10b29sYmFyLXN0YXR1cy1yZWQnKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5kdXJhdGlvbikgewogICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uQ2VsbC50ZXh0Q29udGVudCA9IHJlcXVlc3QuZHVyYXRpb24gKyAnIG1zJzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5wcm9maWxlclVybCkgewogICAgICAgICAgICAgICAgICAgIHByb2ZpbGVyQ2VsbC50ZXh0Q29udGVudCA9ICcnOwogICAgICAgICAgICAgICAgICAgIHZhciBwcm9maWxlckxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgICAgICAgICAgcHJvZmlsZXJMaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsIHJlcXVlc3QucHJvZmlsZXJVcmwpOwogICAgICAgICAgICAgICAgICAgIHByb2ZpbGVyTGluay50ZXh0Q29udGVudCA9IHJlcXVlc3QucHJvZmlsZTsKICAgICAgICAgICAgICAgICAgICBwcm9maWxlckNlbGwuYXBwZW5kQ2hpbGQocHJvZmlsZXJMaW5rKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZW5kZXJBamF4UmVxdWVzdHMoKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICI7CiAgICAgICAgLy8gbGluZSAyOTUKICAgICAgICBpZiAoYXJyYXlfa2V5X2V4aXN0cygiZXhjbHVkZWRfYWpheF9wYXRocyIsICRjb250ZXh0KSkgewogICAgICAgICAgICAvLyBsaW5lIDI5NgogICAgICAgICAgICB5aWVsZCAiICAgICAgICAgICAgaWYgKHdpbmRvdy5mZXRjaCAmJiB3aW5kb3cuZmV0Y2gucG9seWZpbGwgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgdmFyIG9sZEZldGNoID0gd2luZG93LmZldGNoOwogICAgICAgICAgICAgICAgd2luZG93LmZldGNoID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gb2xkRmV0Y2guYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gYXJndW1lbnRzWzBdOwogICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBhcmd1bWVudHNbMV07CiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtVHlwZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudHNbMF0pOwogICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbVR5cGUgPT09ICdbb2JqZWN0IFJlcXVlc3RdJykgewogICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBhcmd1bWVudHNbMF0udXJsOwogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IGFyZ3VtZW50c1swXS5tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogYXJndW1lbnRzWzBdLmNyZWRlbnRpYWxzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogYXJndW1lbnRzWzBdLmhlYWRlcnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlOiBhcmd1bWVudHNbMF0ubW9kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0OiBhcmd1bWVudHNbMF0ucmVkaXJlY3QKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBTdHJpbmcodXJsKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCF1cmwubWF0Y2gobmV3IFJlZ0V4cCgiOwogICAgICAgICAgICAvLyBsaW5lIDMxNQogICAgICAgICAgICB5aWVsZCBqc29uX2VuY29kZSgoaXNzZXQoJGNvbnRleHRbImV4Y2x1ZGVkX2FqYXhfcGF0aHMiXSkgfHwgYXJyYXlfa2V5X2V4aXN0cygiZXhjbHVkZWRfYWpheF9wYXRocyIsICRjb250ZXh0KSA/ICRjb250ZXh0WyJleGNsdWRlZF9hamF4X3BhdGhzIl0gOiAoZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgUnVudGltZUVycm9yKCdWYXJpYWJsZSAiZXhjbHVkZWRfYWpheF9wYXRocyIgZG9lcyBub3QgZXhpc3QuJywgMzE1LCAkdGhpcy0+c291cmNlKTsgfSkoKSkpOwogICAgICAgICAgICB5aWVsZCAiKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGhvZCA9ICdHRVQnOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1zICYmIHBhcmFtcy5tZXRob2QgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kID0gcGFyYW1zLm1ldGhvZDsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YWNrRWxlbWVudCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZmV0Y2gnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IG5ldyBEYXRlKCkKICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSByZXF1ZXN0U3RhY2sucHVzaChzdGFja0VsZW1lbnQpIC0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFja0VsZW1lbnQuZHVyYXRpb24gPSBuZXcgRGF0ZSgpIC0gc3RhY2tFbGVtZW50LnN0YXJ0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LmVycm9yID0gci5zdGF0dXMgPCAyMDAgfHwgci5zdGF0dXMgPj0gNDAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LnN0YXR1c0NvZGUgPSByLnN0YXR1czsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrRWxlbWVudC5wcm9maWxlID0gci5oZWFkZXJzLmdldCgneC1kZWJ1Zy10b2tlbicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LnByb2ZpbGVyVXJsID0gci5oZWFkZXJzLmdldCgneC1kZWJ1Zy10b2tlbi1saW5rJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFja0VsZW1lbnQudG9vbGJhclJlcGxhY2VGaW5pc2hlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LnRvb2xiYXJSZXBsYWNlID0gJzEnID09PSByLmhlYWRlcnMuZ2V0KCdTeW1mb255LURlYnVnLVRvb2xiYXItUmVwbGFjZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluaXNoQWpheFJlcXVlc3QoaWR4KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LmVycm9yID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmlzaEFqYXhSZXF1ZXN0KGlkeCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBzdGFydEFqYXhSZXF1ZXN0KGlkeCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHdpbmRvdy5YTUxIdHRwUmVxdWVzdCAmJiBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcikgewogICAgICAgICAgICAgICAgdmFyIHByb3hpZWQgPSBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUub3BlbjsKCiAgICAgICAgICAgICAgICBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCBhc3luYywgdXNlciwgcGFzcykgewogICAgICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgICAgICAgICAgICAgLyogcHJldmVudCBsb2dnaW5nIEFKQVggY2FsbHMgdG8gc3RhdGljIGFuZCBpbmxpbmUgZmlsZXMsIGxpa2UgdGVtcGxhdGVzICovCiAgICAgICAgICAgICAgICAgICAgdmFyIHBhdGggPSB1cmw7CiAgICAgICAgICAgICAgICAgICAgaWYgKHVybC5zbGljZSgwLCAxKSA9PT0gJy8nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09PSB1cmwuaW5kZXhPZignIjsKICAgICAgICAgICAgLy8gbGluZSAzNTgKICAgICAgICAgICAgeWllbGQgJHRoaXMtPmVudi0+Z2V0UnVudGltZSgnVHdpZ1xSdW50aW1lXEVzY2FwZXJSdW50aW1lJyktPmVzY2FwZSgkdGhpcy0+ZW52LT5nZXRSdW50aW1lKCdUd2lnXFJ1bnRpbWVcRXNjYXBlclJ1bnRpbWUnKS0+ZXNjYXBlKENvcmVFeHRlbnNpb246OmdldEF0dHJpYnV0ZSgkdGhpcy0+ZW52LCAkdGhpcy0+c291cmNlLCAoaXNzZXQoJGNvbnRleHRbInJlcXVlc3QiXSkgfHwgYXJyYXlfa2V5X2V4aXN0cygicmVxdWVzdCIsICRjb250ZXh0KSA/ICRjb250ZXh0WyJyZXF1ZXN0Il0gOiAoZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgUnVudGltZUVycm9yKCdWYXJpYWJsZSAicmVxdWVzdCIgZG9lcyBub3QgZXhpc3QuJywgMzU4LCAkdGhpcy0+c291cmNlKTsgfSkoKSksICJiYXNlUGF0aCIsIFtdLCAiYW55IiwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMzU4KSwgImpzIiksICJodG1sIiwgbnVsbCwgdHJ1ZSk7CiAgICAgICAgICAgIHlpZWxkICInKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IHVybC5zbGljZSgiOwogICAgICAgICAgICAvLyBsaW5lIDM1OQogICAgICAgICAgICB5aWVsZCAkdGhpcy0+ZW52LT5nZXRSdW50aW1lKCdUd2lnXFJ1bnRpbWVcRXNjYXBlclJ1bnRpbWUnKS0+ZXNjYXBlKFR3aWdcRXh0ZW5zaW9uXENvcmVFeHRlbnNpb246Omxlbmd0aCgkdGhpcy0+ZW52LT5nZXRDaGFyc2V0KCksIENvcmVFeHRlbnNpb246OmdldEF0dHJpYnV0ZSgkdGhpcy0+ZW52LCAkdGhpcy0+c291cmNlLCAoaXNzZXQoJGNvbnRleHRbInJlcXVlc3QiXSkgfHwgYXJyYXlfa2V5X2V4aXN0cygicmVxdWVzdCIsICRjb250ZXh0KSA/ICRjb250ZXh0WyJyZXF1ZXN0Il0gOiAoZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgUnVudGltZUVycm9yKCdWYXJpYWJsZSAicmVxdWVzdCIgZG9lcyBub3QgZXhpc3QuJywgMzU5LCAkdGhpcy0+c291cmNlKTsgfSkoKSksICJiYXNlUGF0aCIsIFtdLCAiYW55IiwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMzU5KSksICJodG1sIiwgbnVsbCwgdHJ1ZSk7CiAgICAgICAgICAgIHlpZWxkICIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKDAgPT09IHVybC5pbmRleE9mKCciOwogICAgICAgICAgICAvLyBsaW5lIDM2MgogICAgICAgICAgICB5aWVsZCAkdGhpcy0+ZW52LT5nZXRSdW50aW1lKCdUd2lnXFJ1bnRpbWVcRXNjYXBlclJ1bnRpbWUnKS0+ZXNjYXBlKCR0aGlzLT5lbnYtPmdldFJ1bnRpbWUoJ1R3aWdcUnVudGltZVxFc2NhcGVyUnVudGltZScpLT5lc2NhcGUoKENvcmVFeHRlbnNpb246OmdldEF0dHJpYnV0ZSgkdGhpcy0+ZW52LCAkdGhpcy0+c291cmNlLCAoaXNzZXQoJGNvbnRleHRbInJlcXVlc3QiXSkgfHwgYXJyYXlfa2V5X2V4aXN0cygicmVxdWVzdCIsICRjb250ZXh0KSA/ICRjb250ZXh0WyJyZXF1ZXN0Il0gOiAoZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgUnVudGltZUVycm9yKCdWYXJpYWJsZSAicmVxdWVzdCIgZG9lcyBub3QgZXhpc3QuJywgMzYyLCAkdGhpcy0+c291cmNlKTsgfSkoKSksICJzY2hlbWVBbmRIdHRwSG9zdCIsIFtdLCAiYW55IiwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMzYyKSAuIENvcmVFeHRlbnNpb246OmdldEF0dHJpYnV0ZSgkdGhpcy0+ZW52LCAkdGhpcy0+c291cmNlLCAoaXNzZXQoJGNvbnRleHRbInJlcXVlc3QiXSkgfHwgYXJyYXlfa2V5X2V4aXN0cygicmVxdWVzdCIsICRjb250ZXh0KSA/ICRjb250ZXh0WyJyZXF1ZXN0Il0gOiAoZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgUnVudGltZUVycm9yKCdWYXJpYWJsZSAicmVxdWVzdCIgZG9lcyBub3QgZXhpc3QuJywgMzYyLCAkdGhpcy0+c291cmNlKTsgfSkoKSksICJiYXNlUGF0aCIsIFtdLCAiYW55IiwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMzYyKSksICJqcyIpLCAiaHRtbCIsIG51bGwsIHRydWUpOwogICAgICAgICAgICB5aWVsZCAiJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IHVybC5zbGljZSgiOwogICAgICAgICAgICAvLyBsaW5lIDM2MwogICAgICAgICAgICB5aWVsZCAkdGhpcy0+ZW52LT5nZXRSdW50aW1lKCdUd2lnXFJ1bnRpbWVcRXNjYXBlclJ1bnRpbWUnKS0+ZXNjYXBlKFR3aWdcRXh0ZW5zaW9uXENvcmVFeHRlbnNpb246Omxlbmd0aCgkdGhpcy0+ZW52LT5nZXRDaGFyc2V0KCksIChDb3JlRXh0ZW5zaW9uOjpnZXRBdHRyaWJ1dGUoJHRoaXMtPmVudiwgJHRoaXMtPnNvdXJjZSwgKGlzc2V0KCRjb250ZXh0WyJyZXF1ZXN0Il0pIHx8IGFycmF5X2tleV9leGlzdHMoInJlcXVlc3QiLCAkY29udGV4dCkgPyAkY29udGV4dFsicmVxdWVzdCJdIDogKGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcignVmFyaWFibGUgInJlcXVlc3QiIGRvZXMgbm90IGV4aXN0LicsIDM2MywgJHRoaXMtPnNvdXJjZSk7IH0pKCkpLCAic2NoZW1lQW5kSHR0cEhvc3QiLCBbXSwgImFueSIsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIDM2MykgLiBDb3JlRXh0ZW5zaW9uOjpnZXRBdHRyaWJ1dGUoJHRoaXMtPmVudiwgJHRoaXMtPnNvdXJjZSwgKGlzc2V0KCRjb250ZXh0WyJyZXF1ZXN0Il0pIHx8IGFycmF5X2tleV9leGlzdHMoInJlcXVlc3QiLCAkY29udGV4dCkgPyAkY29udGV4dFsicmVxdWVzdCJdIDogKGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcignVmFyaWFibGUgInJlcXVlc3QiIGRvZXMgbm90IGV4aXN0LicsIDM2MywgJHRoaXMtPnNvdXJjZSk7IH0pKCkpLCAiYmFzZVBhdGgiLCBbXSwgImFueSIsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIDM2MykpKSwgImh0bWwiLCBudWxsLCB0cnVlKTsKICAgICAgICAgICAgeWllbGQgIik7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoIXBhdGgubWF0Y2gobmV3IFJlZ0V4cCgiOwogICAgICAgICAgICAvLyBsaW5lIDM2NgogICAgICAgICAgICB5aWVsZCBqc29uX2VuY29kZSgoaXNzZXQoJGNvbnRleHRbImV4Y2x1ZGVkX2FqYXhfcGF0aHMiXSkgfHwgYXJyYXlfa2V5X2V4aXN0cygiZXhjbHVkZWRfYWpheF9wYXRocyIsICRjb250ZXh0KSA/ICRjb250ZXh0WyJleGNsdWRlZF9hamF4X3BhdGhzIl0gOiAoZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgUnVudGltZUVycm9yKCdWYXJpYWJsZSAiZXhjbHVkZWRfYWpheF9wYXRocyIgZG9lcyBub3QgZXhpc3QuJywgMzY2LCAkdGhpcy0+c291cmNlKTsgfSkoKSkpOwogICAgICAgICAgICB5aWVsZCAiKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YWNrRWxlbWVudCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAneGhyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBuZXcgRGF0ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gcmVxdWVzdFN0YWNrLnB1c2goc3RhY2tFbGVtZW50KSAtIDE7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ3JlYWR5c3RhdGVjaGFuZ2UnLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLnJlYWR5U3RhdGUgPT0gNCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrRWxlbWVudC5kdXJhdGlvbiA9IG5ldyBEYXRlKCkgLSBzdGFja0VsZW1lbnQuc3RhcnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LmVycm9yID0gc2VsZi5zdGF0dXMgPCAyMDAgfHwgc2VsZi5zdGF0dXMgPj0gNDAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrRWxlbWVudC5zdGF0dXNDb2RlID0gc2VsZi5zdGF0dXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdEhlYWRlcnMoc2VsZiwgc3RhY2tFbGVtZW50KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluaXNoQWpheFJlcXVlc3QoaWR4KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgZmFsc2UpOwoKICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRBamF4UmVxdWVzdChpZHgpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcHJveGllZC5hcHBseSh0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgIjsKICAgICAgICB9CiAgICAgICAgLy8gbGluZSAzOTUKICAgICAgICB5aWVsZCAiCiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBoYXNDbGFzczogaGFzQ2xhc3MsCgogICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3M6IHJlbW92ZUNsYXNzLAoKICAgICAgICAgICAgICAgIGFkZENsYXNzOiBhZGRDbGFzcywKCiAgICAgICAgICAgICAgICB0b2dnbGVDbGFzczogdG9nZ2xlQ2xhc3MsCgogICAgICAgICAgICAgICAgZ2V0UHJlZmVyZW5jZTogZ2V0UHJlZmVyZW5jZSwKCiAgICAgICAgICAgICAgICBzZXRQcmVmZXJlbmNlOiBzZXRQcmVmZXJlbmNlLAoKICAgICAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXI6IGFkZEV2ZW50TGlzdGVuZXIsCgogICAgICAgICAgICAgICAgcmVxdWVzdDogcmVxdWVzdCwKCiAgICAgICAgICAgICAgICByZW5kZXJBamF4UmVxdWVzdHM6IHJlbmRlckFqYXhSZXF1ZXN0cywKCiAgICAgICAgICAgICAgICBnZXRTZndkdDogZnVuY3Rpb24odG9rZW4pIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2Z3ZHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZndkdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZndkdCcgKyB0b2tlbik7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZndkdDsKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24oc2VsZWN0b3IsIHVybCwgb25TdWNjZXNzLCBvbkVycm9yLCBvcHRpb25zKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VsZWN0b3IpOwoKICAgICAgICAgICAgICAgICAgICBpZiAoZWwgJiYgZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXNmdXJsJykgIT09IHVybCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oeGhyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuaW5uZXJIVE1MID0geGhyLnJlc3BvbnNlVGV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2Z1cmwnLCB1cmwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGVsLCAnbG9hZGluZycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwZW5kaW5nID0gcGVuZGluZ1JlcXVlc3RzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVxdWVzdFN0YWNrLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0QWpheFJlcXVlc3QoaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0U3RhY2tbaV0uZHVyYXRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmlzaEFqYXhSZXF1ZXN0KGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJldmVydCB0aGUgcGVuZGluZyBzdGF0ZSBpbiBjYXNlIHRoZXJlIHdhcyBhIHN0YXJ0IGNhbGxlZCB3aXRob3V0IGEgZmluaXNoIGFib3ZlLiAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdSZXF1ZXN0cyA9IHBlbmRpbmc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9uU3VjY2VzcyB8fCBub29wKSh4aHIsIGVsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbih4aHIpIHsgKG9uRXJyb3IgfHwgbm9vcCkoeGhyLCBlbCk7IH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMKICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBzaG93VG9vbGJhcjogZnVuY3Rpb24odG9rZW4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc2Z3ZHQgPSB0aGlzLmdldFNmd2R0KHRva2VuKTsKICAgICAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyhzZndkdCwgJ3NmLWRpc3BsYXktbm9uZScpOwoKICAgICAgICAgICAgICAgICAgICBpZiAoZ2V0UHJlZmVyZW5jZSgndG9vbGJhci9kaXNwbGF5U3RhdGUnKSA9PSAnbm9uZScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmVG9vbGJhck1haW5Db250ZW50LScgKyB0b2tlbikuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmVG9vbGJhckNsZWFyZXItJyArIHRva2VuKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZNaW5pVG9vbGJhci0nICsgdG9rZW4pLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZlRvb2xiYXJNYWluQ29udGVudC0nICsgdG9rZW4pLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZUb29sYmFyQ2xlYXJlci0nICsgdG9rZW4pLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZNaW5pVG9vbGJhci0nICsgdG9rZW4pLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBoaWRlVG9vbGJhcjogZnVuY3Rpb24odG9rZW4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc2Z3ZHQgPSB0aGlzLmdldFNmd2R0KHRva2VuKTsKICAgICAgICAgICAgICAgICAgICBhZGRDbGFzcyhzZndkdCwgJ3NmLWRpc3BsYXktbm9uZScpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBpbml0VG9vbGJhcjogZnVuY3Rpb24odG9rZW4pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dUb29sYmFyKHRva2VuKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGhpZGVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZUb29sYmFySGlkZUJ1dHRvbi0nICsgdG9rZW4pOwogICAgICAgICAgICAgICAgICAgIHZhciBoaWRlQnV0dG9uU3ZnID0gaGlkZUJ1dHRvbi5xdWVyeVNlbGVjdG9yKCdzdmcnKTsKICAgICAgICAgICAgICAgICAgICBoaWRlQnV0dG9uU3ZnLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpOwogICAgICAgICAgICAgICAgICAgIGhpZGVCdXR0b25Tdmcuc2V0QXR0cmlidXRlKCdmb2N1c2FibGUnLCAnZmFsc2UnKTsKICAgICAgICAgICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKGhpZGVCdXR0b24sICdjbGljaycsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSB0aGlzLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIHAuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgKHAucHJldmlvdXNFbGVtZW50U2libGluZyB8fCBwLnByZXZpb3VzU2libGluZykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmTWluaVRvb2xiYXItJyArIHRva2VuKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJlZmVyZW5jZSgndG9vbGJhci9kaXNwbGF5U3RhdGUnLCAnbm9uZScpOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICB2YXIgc2hvd0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZlRvb2xiYXJNaW5pVG9nZ2xlci0nICsgdG9rZW4pOwogICAgICAgICAgICAgICAgICAgIHZhciBzaG93QnV0dG9uU3ZnID0gc2hvd0J1dHRvbi5xdWVyeVNlbGVjdG9yKCdzdmcnKTsKICAgICAgICAgICAgICAgICAgICBzaG93QnV0dG9uU3ZnLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpOwogICAgICAgICAgICAgICAgICAgIHNob3dCdXR0b25Tdmcuc2V0QXR0cmlidXRlKCdmb2N1c2FibGUnLCAnZmFsc2UnKTsKICAgICAgICAgICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKHNob3dCdXR0b24sICdjbGljaycsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW0gPSB0aGlzLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtLnN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZUb29sYmFyTWFpbkNvbnRlbnQtJyArIHRva2VuKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmVG9vbGJhckNsZWFyZXItJyArIHRva2VuKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZlRvb2xiYXJNYWluQ29udGVudC0nICsgdG9rZW4pLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmVG9vbGJhckNsZWFyZXItJyArIHRva2VuKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBzZXRQcmVmZXJlbmNlKCd0b29sYmFyL2Rpc3BsYXlTdGF0ZScsICdibG9jaycpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBsb2FkVG9vbGJhcjogZnVuY3Rpb24odG9rZW4sIG5ld1Rva2VuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIHZhciB0cmllc0NvdW50ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZMb2FkQ291bnRlci0nICsgdG9rZW4pOwoKICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnk6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIG9uU2VuZDogZnVuY3Rpb24gKGNvdW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQgPT09IDMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmluaXRUb29sYmFyKHRva2VuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJpZXNDb3VudGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZXNDb3VudGVyLnRleHRDb250ZW50ID0gY291bnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGNhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZkxvYWRDYW5jZWwtJyArIHRva2VuKTsKICAgICAgICAgICAgICAgICAgICBpZiAoY2FuY2VsQnV0dG9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoY2FuY2VsQnV0dG9uLCAnY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zdG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuaGlkZVRvb2xiYXIodG9rZW4pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIG5ld1Rva2VuID0gKG5ld1Rva2VuIHx8IHRva2VuKTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkKAogICAgICAgICAgICAgICAgICAgICAgICAnc2Z3ZHQnICsgdG9rZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICciOwogICAgICAgIC8vIGxpbmUgNTQzCiAgICAgICAgeWllbGQgJHRoaXMtPmVudi0+Z2V0UnVudGltZSgnVHdpZ1xSdW50aW1lXEVzY2FwZXJSdW50aW1lJyktPmVzY2FwZSgkdGhpcy0+ZW52LT5nZXRSdW50aW1lKCdUd2lnXFJ1bnRpbWVcRXNjYXBlclJ1bnRpbWUnKS0+ZXNjYXBlKCR0aGlzLT5leHRlbnNpb25zWydTeW1mb255XEJyaWRnZVxUd2lnXEV4dGVuc2lvblxSb3V0aW5nRXh0ZW5zaW9uJ10tPmdldFVybCgiX3dkdCIsIFsidG9rZW4iID0+ICJ4eHh4eHgiXSksICJqcyIpLCAiaHRtbCIsIG51bGwsIHRydWUpOwogICAgICAgIHlpZWxkICInLnJlcGxhY2UoL3h4eHh4eC8sIG5ld1Rva2VuKSwKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oeGhyLCBlbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogRG8gbm90aGluZyBpbiB0aGUgZWRnZSBjYXNlIHdoZXJlIHRoZSB0b29sYmFyIGhhcyBhbHJlYWR5IGJlZW4gcmVwbGFjZWQgd2l0aCBhIG5ldyBvbmUgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmVG9vbGJhck1haW5Db250ZW50LScgKyBuZXdUb2tlbikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogRXZhbHVhdGUgaW4gZ2xvYmFsIHNjb3BlIHNjcmlwdHMgZW1iZWRkZWQgaW5zaWRlIHRoZSB0b29sYmFyICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSwgc2NyaXB0cyA9IFtdLnNsaWNlLmNhbGwoZWwucXVlcnlTZWxlY3RvckFsbCgnc2NyaXB0JykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHNjcmlwdHMubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NyaXB0c1tpXS5maXJzdENoaWxkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2YWwuY2FsbCh7fSwgc2NyaXB0c1tpXS5maXJzdENoaWxkLm5vZGVWYWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAtMSAhPT0geGhyLnJlc3BvbnNlVGV4dC5pbmRleE9mKCdzZi10b29sYmFycmVzZXQnKSA/ICdibG9jaycgOiAnbm9uZSc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsLnN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuaW5pdFRvb2xiYXIobmV3VG9rZW4pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEhhbmRsZSB0b29sYmFyLWluZm8gcG9zaXRpb24gKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b29sYmFyQmxvY2tzID0gW10uc2xpY2UuY2FsbChlbC5xdWVyeVNlbGVjdG9yQWxsKCcuc2YtdG9vbGJhci1ibG9jaycpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0b29sYmFyQmxvY2tzLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGJhckJsb2Nrc1tpXS5vbm1vdXNlb3ZlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvb2xiYXJJbmZvID0gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCcuc2YtdG9vbGJhci1pbmZvJylbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYWdlV2lkdGggPSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudFdpZHRoID0gdG9vbGJhckluZm8ub2Zmc2V0V2lkdGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZWZ0VmFsdWUgPSAoZWxlbWVudFdpZHRoICsgdGhpcy5vZmZzZXRMZWZ0KSAtIHBhZ2VXaWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJpZ2h0VmFsdWUgPSAoZWxlbWVudFdpZHRoICsgKHBhZ2VXaWR0aCAtIHRoaXMub2Zmc2V0TGVmdCkpIC0gcGFnZVdpZHRoOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogUmVzZXQgcmlnaHQgYW5kIGxlZnQgdmFsdWUsIHVzZWZ1bCBvbiB3aW5kb3cgcmVzaXplICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXJJbmZvLnN0eWxlLnJpZ2h0ID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXJJbmZvLnN0eWxlLmxlZnQgPSAnJzsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50V2lkdGggPiBwYWdlV2lkdGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXJJbmZvLnN0eWxlLmxlZnQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxlZnRWYWx1ZSA+IDAgJiYgcmlnaHRWYWx1ZSA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXJJbmZvLnN0eWxlLnJpZ2h0ID0gKHJpZ2h0VmFsdWUgKiAtMSkgKyAncHgnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxlZnRWYWx1ZSA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXJJbmZvLnN0eWxlLmxlZnQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGJhckluZm8uc3R5bGUucmlnaHQgPSAnMHB4JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyQWpheFJlcXVlc3RzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZi10b29sYmFyLWFqYXgtY2xlYXInKSwgJ2NsaWNrJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFN0YWNrID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyQWpheFJlcXVlc3RzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc1N0cmVhayA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNmLXRvb2xiYXItYWpheC1yZXF1ZXN0LWxpc3QnKS5pbm5lckhUTUwgPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2YtdG9vbGJhci1ibG9jay1hamF4JyksICdtb3VzZWVudGVyJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2YtdG9vbGJhci1ibG9jay1hamF4IC5zZi10b29sYmFyLWluZm8nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnNjcm9sbFRvcCA9IGVsZW0uc2Nyb2xsSGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZi10b29sYmFyLWJsb2NrLWFqYXggPiAuc2YtdG9vbGJhci1pY29uJyksICdjbGljaycsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKHRoaXMucGFyZW50Tm9kZSwgJ2hvdmVyJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHVtcEluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2YtdG9vbGJhci1ibG9jay1kdW1wIC5zZi10b29sYmFyLWluZm8nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBkdW1wSW5mbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZHVtcEluZm8sICdzZmJlZm9yZWR1bXBjb2xsYXBzZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVtcEluZm8uc3R5bGUubWluSGVpZ2h0ID0gZHVtcEluZm8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0KydweCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihkdW1wSW5mbywgJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1bXBJbmZvLnN0eWxlLm1pbkhlaWdodCA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbih4aHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzICE9PSAwICYmICFvcHRpb25zLnN0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Z3ZHQgPSB0aGF0LmdldFNmd2R0KHRva2VuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZndkdC5pbm5lckhUTUwgPSAnXFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2YtdG9vbGJhcnJlc2V0IG5vdHJhbnNsYXRlXCI+XFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNmLXRvb2xiYXItaWNvblwiPjxzdmcgd2lkdGg9XCIyNlwiIGhlaWdodD1cIjI4XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZlcnNpb249XCIxLjFcIiB4PVwiMHB4XCIgeT1cIjBweFwiIHZpZXdCb3g9XCIwIDAgMjYgMjhcIiBlbmFibGUtYmFja2dyb3VuZD1cIm5ldyAwIDAgMjYgMjhcIiB4bWw6c3BhY2U9XCJwcmVzZXJ2ZVwiPjxwYXRoIGZpbGw9XCIjRkZGRkZGXCIgZD1cIk0xMyAwQzUuOCAwIDAgNS44IDAgMTNjMCA3LjIgNS44IDEzIDEzIDEzYzcuMiAwIDEzLTUuOCAxMy0xM0MyNiA1LjggMjAuMiAwIDEzIDB6IE0yMCA3LjUgYy0wLjYgMC0xLTAuMy0xLTAuOWMwLTAuMiAwLTAuNCAwLjItMC42YzAuMS0wLjMgMC4yLTAuMyAwLjItMC40YzAtMC4zLTAuNS0wLjQtMC43LTAuNGMtMiAwLjEtMi41IDIuNy0yLjkgNC44bC0wLjIgMS4xIGMxLjEgMC4yIDEuOSAwIDIuNC0wLjNjMC42LTAuNC0wLjItMC44LTAuMS0xLjNDMTggOS4yIDE4LjQgOSAxOC43IDguOWMwLjUgMCAwLjggMC41IDAuOCAxYzAgMC44LTEuMSAyLTMuMyAxLjkgYy0wLjMgMC0wLjUgMC0wLjctMC4xTDE1IDE0LjFjLTAuNCAxLjctMC45IDQuMS0yLjYgNi4yYy0xLjUgMS44LTMuMSAyLjEtMy44IDIuMWMtMS4zIDAtMi4xLTAuNi0yLjItMS42YzAtMC45IDAuOC0xLjQgMS4zLTEuNCBjMC43IDAgMS4yIDAuNSAxLjIgMS4xYzAgMC41LTAuMiAwLjYtMC40IDAuN2MtMC4xIDAuMS0wLjMgMC4yLTAuMyAwLjRjMCAwLjEgMC4xIDAuMyAwLjQgMC4zYzAuNSAwIDAuOS0wLjMgMS4yLTAuNSBjMS4zLTEgMS43LTIuOSAyLjQtNi4ybDAuMS0wLjhjMC4yLTEuMSAwLjUtMi4zIDAuOC0zLjVjLTAuOS0wLjctMS40LTEuNS0yLjYtMS44Yy0wLjgtMC4yLTEuMyAwLTEuNyAwLjRDOC40IDEwIDguNiAxMC43IDkgMTEuMSBsMC43IDAuN2MwLjggMC45IDEuMyAxLjcgMS4xIDIuN2MtMC4zIDEuNi0yLjEgMi44LTQuMyAyLjFjLTEuOS0wLjYtMi4yLTEuOS0yLTIuN2MwLjItMC42IDAuNy0wLjggMS4yLTAuNiBjMC41IDAuMiAwLjcgMC44IDAuNiAxLjNjMCAwLjEgMCAwLjEtMC4xIDAuM0M2IDE1IDUuOSAxNS4yIDUuOSAxNS4zYy0wLjEgMC40IDAuNCAwLjcgMC44IDAuOGMwLjggMC4zIDEuNy0wLjIgMS45LTAuOSBjMC4yLTAuNi0wLjItMS4xLTAuNC0xLjJsLTAuOC0wLjljLTAuNC0wLjQtMS4yLTEuNS0wLjgtMi44YzAuMi0wLjUgMC41LTEgMC45LTEuNGMxLTAuNyAyLTAuOCAzLTAuNmMxLjMgMC40IDEuOSAxLjIgMi44IDEuOSBjMC41LTEuMyAxLjEtMi42IDItMy44YzAuOS0xIDItMS43IDMuMy0xLjhDMjAgNC44IDIxIDUuNCAyMSA2LjNDMjEgNi43IDIwLjggNy41IDIwIDcuNXpcIi8+PC9zdmc+PC9kaXY+XFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgbG9hZGluZyB0aGUgd2ViIGRlYnVnIHRvb2xiYXIuIDxhIGhyZWY9XCIiOwogICAgICAgIC8vIGxpbmUgNjI2CiAgICAgICAgeWllbGQgJHRoaXMtPmVudi0+Z2V0UnVudGltZSgnVHdpZ1xSdW50aW1lXEVzY2FwZXJSdW50aW1lJyktPmVzY2FwZSgkdGhpcy0+ZW52LT5nZXRSdW50aW1lKCdUd2lnXFJ1bnRpbWVcRXNjYXBlclJ1bnRpbWUnKS0+ZXNjYXBlKCR0aGlzLT5leHRlbnNpb25zWydTeW1mb255XEJyaWRnZVxUd2lnXEV4dGVuc2lvblxSb3V0aW5nRXh0ZW5zaW9uJ10tPmdldFVybCgiX3Byb2ZpbGVyX2hvbWUiKSwgImpzIiksICJodG1sIiwgbnVsbCwgdHJ1ZSk7CiAgICAgICAgeWllbGQgIicgKyBuZXdUb2tlbiArICdcIj5PcGVuIHRoZSB3ZWIgcHJvZmlsZXIuPC9hPlxcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Z3ZHQuc2V0QXR0cmlidXRlKCdjbGFzcycsICdzZi10b29sYmFyIHNmLWVycm9yLXRvb2xiYXInKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucwogICAgICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICB0b2dnbGU6IGZ1bmN0aW9uKHNlbGVjdG9yLCBlbE9uLCBlbE9mZikgewogICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSBlbE9uLnN0eWxlLmRpc3BsYXksCiAgICAgICAgICAgICAgICAgICAgICAgIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VsZWN0b3IpOwoKICAgICAgICAgICAgICAgICAgICBlbE9uLnN0eWxlLmRpc3BsYXkgPSBlbE9mZi5zdHlsZS5kaXNwbGF5OwogICAgICAgICAgICAgICAgICAgIGVsT2ZmLnN0eWxlLmRpc3BsYXkgPSB0bXA7CgogICAgICAgICAgICAgICAgICAgIGlmIChlbCkgewogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnID09PSB0bXAgPyAnbm9uZScgOiAnYmxvY2snOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgIH0pKCk7CiAgICB9CgogICAgU2Zqcy5sb2FkVG9vbGJhcignIjsKICAgICAgICAvLyBsaW5lIDY1NQogICAgICAgIHlpZWxkICR0aGlzLT5lbnYtPmdldFJ1bnRpbWUoJ1R3aWdcUnVudGltZVxFc2NhcGVyUnVudGltZScpLT5lc2NhcGUoKGlzc2V0KCRjb250ZXh0WyJ0b2tlbiJdKSB8fCBhcnJheV9rZXlfZXhpc3RzKCJ0b2tlbiIsICRjb250ZXh0KSA/ICRjb250ZXh0WyJ0b2tlbiJdIDogKGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcignVmFyaWFibGUgInRva2VuIiBkb2VzIG5vdCBleGlzdC4nLCA2NTUsICR0aGlzLT5zb3VyY2UpOyB9KSgpKSwgImh0bWwiLCBudWxsLCB0cnVlKTsKICAgICAgICB5aWVsZCAiJyk7Ci8qXV0+Ki88L3NjcmlwdD4KIjsKICAgICAgICAKICAgICAgICAkX19pbnRlcm5hbF81YTI3YThiYTIxY2E3OWI2MTkzMjM3NmIyZmE5MjJkMi0+bGVhdmUoJF9faW50ZXJuYWxfNWEyN2E4YmEyMWNhNzliNjE5MzIzNzZiMmZhOTIyZDJfcHJvZik7CgogICAgICAgIAogICAgICAgICRfX2ludGVybmFsXzZmNDdiYmU5OTgzYWY4MWYxZTc0NTBlOWEzZTM3NjhmLT5sZWF2ZSgkX19pbnRlcm5hbF82ZjQ3YmJlOTk4M2FmODFmMWU3NDUwZTlhM2UzNzY4Zl9wcm9mKTsKCiAgICAgICAgcmV0dXJuOyB5aWVsZCAnJzsKICAgIH0KCiAgICAvKioKICAgICAqIEBjb2RlQ292ZXJhZ2VJZ25vcmUKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldFRlbXBsYXRlTmFtZSgpCiAgICB7CiAgICAgICAgcmV0dXJuICJAV2ViUHJvZmlsZXIvUHJvZmlsZXIvdG9vbGJhcl9qcy5odG1sLnR3aWciOwogICAgfQoKICAgIC8qKgogICAgICogQGNvZGVDb3ZlcmFnZUlnbm9yZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gaXNUcmFpdGFibGUoKQogICAgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBjb2RlQ292ZXJhZ2VJZ25vcmUKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldERlYnVnSW5mbygpCiAgICB7CiAgICAgICAgcmV0dXJuIGFycmF5ICggIDc0NCA9PiA2NTUsICA3MTIgPT4gNjI2LCAgNjI2ID0+IDU0MywgIDQ3NiA9PiAzOTUsICA0NDQgPT4gMzY2LCAgNDM4ID0+IDM2MywgIDQzNCA9PiAzNjIsICA0MjggPT4gMzU5LCAgNDI0ID0+IDM1OCwgIDM3OCA9PiAzMTUsICAzNTcgPT4gMjk2LCAgMzU1ID0+IDI5NSwgIDcxID0+IDE5LCAgNjUgPT4gMTMsICA1NyA9PiAxMiwgIDUyID0+IDksICA1MCA9PiA3LCAgNDkgPT4gMiwgIDQ0ID0+IDEsKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0U291cmNlQ29udGV4dCgpCiAgICB7CiAgICAgICAgcmV0dXJuIG5ldyBTb3VyY2UoIjxkaXYgaWQ9XCJzZndkdHt7IHRva2VuIH19XCIgY2xhc3M9XCJzZi10b29sYmFyIHNmLWRpc3BsYXktbm9uZVwiIHJvbGU9XCJyZWdpb25cIiBhcmlhLWxhYmVsPVwiU3ltZm9ueSBXZWIgRGVidWcgVG9vbGJhclwiPgogICAge3sgaW5jbHVkZSgnQFdlYlByb2ZpbGVyL1Byb2ZpbGVyL3Rvb2xiYXIuaHRtbC50d2lnJywgewogICAgICAgIHRlbXBsYXRlczogewogICAgICAgICAgICAncmVxdWVzdCc6ICdAV2ViUHJvZmlsZXIvUHJvZmlsZXIvY2FuY2VsLmh0bWwudHdpZycKICAgICAgICB9LAogICAgICAgIHByb2ZpbGU6IG51bGwsCiAgICAgICAgcHJvZmlsZXJfdXJsOiB1cmwoJ19wcm9maWxlcicsIHt0b2tlbjogdG9rZW59KSwKICAgICAgICBwcm9maWxlcl9tYXJrdXBfdmVyc2lvbjogMywKICAgIH0pIH19CjwvZGl2PgoKPHN0eWxleyUgaWYgY3NwX3N0eWxlX25vbmNlICV9IG5vbmNlPVwie3sgY3NwX3N0eWxlX25vbmNlIH19XCJ7JSBlbmRpZiAlfT4KICAgIHt7IGluY2x1ZGUoJ0BXZWJQcm9maWxlci9Qcm9maWxlci90b29sYmFyLmNzcy50d2lnJykgfX0KPC9zdHlsZT4KCnsjIENBVVRJT046IHRoZSBjb250ZW50cyBvZiB0aGlzIGZpbGUgYXJlIHByb2Nlc3NlZCBieSBUd2lnIGJlZm9yZSBsb2FkaW5nCiAgICAgICAgICAgIHRoZW0gYXMgSmF2YVNjcmlwdCBzb3VyY2UgY29kZS4gQWx3YXlzIHVzZSAnLyonIGNvbW1lbnRzIGluc3RlYWQKICAgICAgICAgICAgb2YgJy8vJyBjb21tZW50cyB0byBhdm9pZCBpbXBvc3NpYmxlLXRvLWRlYnVnIHNpZGUtZWZmZWN0cyAjfQo8c2NyaXB0eyUgaWYgY3NwX3NjcmlwdF9ub25jZSBpcyBkZWZpbmVkIGFuZCBjc3Bfc2NyaXB0X25vbmNlICV9IG5vbmNlPVwie3sgY3NwX3NjcmlwdF9ub25jZSB9fVwieyUgZW5kaWYgJX0+Lyo8IVtDREFUQVsqLwogICAgaWYgKHR5cGVvZiBTZmpzID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgU2Zqcy5sb2FkVG9vbGJhciA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBTZmpzID0gKGZ1bmN0aW9uKCkgewogICAgICAgICAgICBcInVzZSBzdHJpY3RcIjsKCiAgICAgICAgICAgIGlmICgnY2xhc3NMaXN0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpIHsKICAgICAgICAgICAgICAgIHZhciBoYXNDbGFzcyA9IGZ1bmN0aW9uIChlbCwgY3NzQ2xhc3MpIHsgcmV0dXJuIGVsLmNsYXNzTGlzdC5jb250YWlucyhjc3NDbGFzcyk7IH07CiAgICAgICAgICAgICAgICB2YXIgcmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbihlbCwgY3NzQ2xhc3MpIHsgZWwuY2xhc3NMaXN0LnJlbW92ZShjc3NDbGFzcyk7IH07CiAgICAgICAgICAgICAgICB2YXIgYWRkQ2xhc3MgPSBmdW5jdGlvbihlbCwgY3NzQ2xhc3MpIHsgZWwuY2xhc3NMaXN0LmFkZChjc3NDbGFzcyk7IH07CiAgICAgICAgICAgICAgICB2YXIgdG9nZ2xlQ2xhc3MgPSBmdW5jdGlvbihlbCwgY3NzQ2xhc3MpIHsgZWwuY2xhc3NMaXN0LnRvZ2dsZShjc3NDbGFzcyk7IH07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB2YXIgaGFzQ2xhc3MgPSBmdW5jdGlvbiAoZWwsIGNzc0NsYXNzKSB7IHJldHVybiBlbC5jbGFzc05hbWUubWF0Y2gobmV3IFJlZ0V4cCgnXFxcXGInICsgY3NzQ2xhc3MgKyAnXFxcXGInKSk7IH07CiAgICAgICAgICAgICAgICB2YXIgcmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbihlbCwgY3NzQ2xhc3MpIHsgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UobmV3IFJlZ0V4cCgnXFxcXGInICsgY3NzQ2xhc3MgKyAnXFxcXGInKSwgJyAnKTsgfTsKICAgICAgICAgICAgICAgIHZhciBhZGRDbGFzcyA9IGZ1bmN0aW9uKGVsLCBjc3NDbGFzcykgeyBpZiAoIWhhc0NsYXNzKGVsLCBjc3NDbGFzcykpIHsgZWwuY2xhc3NOYW1lICs9IFwiIFwiICsgY3NzQ2xhc3M7IH0gfTsKICAgICAgICAgICAgICAgIHZhciB0b2dnbGVDbGFzcyA9IGZ1bmN0aW9uKGVsLCBjc3NDbGFzcykgeyBoYXNDbGFzcyhlbCwgY3NzQ2xhc3MpID8gcmVtb3ZlQ2xhc3MoZWwsIGNzc0NsYXNzKSA6IGFkZENsYXNzKGVsLCBjc3NDbGFzcyk7IH07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBub29wID0gZnVuY3Rpb24oKSB7fTsKCiAgICAgICAgICAgIHZhciBwcm9maWxlclN0b3JhZ2VLZXkgPSAnc3ltZm9ueS9wcm9maWxlci8nOwoKICAgICAgICAgICAgdmFyIGFkZEV2ZW50TGlzdGVuZXI7CgogICAgICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgaWYgKCEoJ2FkZEV2ZW50TGlzdGVuZXInIGluIGVsKSkgewogICAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChlbGVtZW50LCBldmVudE5hbWUsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hdHRhY2hFdmVudCgnb24nICsgZXZlbnROYW1lLCBjYWxsYmFjayk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChlbGVtZW50LCBldmVudE5hbWUsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgY2FsbGJhY2ssIGZhbHNlKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciByZXF1ZXN0ID0gZnVuY3Rpb24odXJsLCBvblN1Y2Nlc3MsIG9uRXJyb3IsIHBheWxvYWQsIG9wdGlvbnMsIHRyaWVzKSB7CiAgICAgICAgICAgICAgICB2YXIgeGhyID0gd2luZG93LlhNTEh0dHBSZXF1ZXN0ID8gbmV3IFhNTEh0dHBSZXF1ZXN0KCkgOiBuZXcgQWN0aXZlWE9iamVjdCgnTWljcm9zb2Z0LlhNTEhUVFAnKTsKICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgICAgICAgICAgICAgb3B0aW9ucy5yZXRyeSA9IG9wdGlvbnMucmV0cnkgfHwgZmFsc2U7CiAgICAgICAgICAgICAgICB0cmllcyA9IHRyaWVzIHx8IDE7CiAgICAgICAgICAgICAgICAvKiB0aGlzIGRlbGF5cyBmb3IgMTI1LCAzNzUsIDYyNSwgODc1LCBhbmQgMTAwMCwgLi4uICovCiAgICAgICAgICAgICAgICB2YXIgZGVsYXkgPSB0cmllcyA8IDUgPyAodHJpZXMgLSAwLjUpICogMjUwIDogMTAwMDsKCiAgICAgICAgICAgICAgICB4aHIub3BlbihvcHRpb25zLm1ldGhvZCB8fCAnR0VUJywgdXJsLCB0cnVlKTsKICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLVJlcXVlc3RlZC1XaXRoJywgJ1hNTEh0dHBSZXF1ZXN0Jyk7CiAgICAgICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoNCAhPT0geGhyLnJlYWR5U3RhdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PSA0MDQgJiYgb3B0aW9ucy5yZXRyeSAmJiAhb3B0aW9ucy5zdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdCh1cmwsIG9uU3VjY2Vzcywgb25FcnJvciwgcGF5bG9hZCwgb3B0aW9ucywgdHJpZXMgKyAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZGVsYXkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoMjAwID09PSB4aHIuc3RhdHVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIChvblN1Y2Nlc3MgfHwgbm9vcCkoeGhyKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAob25FcnJvciB8fCBub29wKSh4aHIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25TZW5kKSB7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5vblNlbmQodHJpZXMpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHhoci5zZW5kKHBheWxvYWQgfHwgJycpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIGdldFByZWZlcmVuY2UgPSBmdW5jdGlvbihuYW1lKSB7CiAgICAgICAgICAgICAgICBpZiAoIXdpbmRvdy5sb2NhbFN0b3JhZ2UpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0ocHJvZmlsZXJTdG9yYWdlS2V5ICsgbmFtZSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB2YXIgc2V0UHJlZmVyZW5jZSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7CiAgICAgICAgICAgICAgICBpZiAoIXdpbmRvdy5sb2NhbFN0b3JhZ2UpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShwcm9maWxlclN0b3JhZ2VLZXkgKyBuYW1lLCB2YWx1ZSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB2YXIgcmVxdWVzdFN0YWNrID0gW107CgogICAgICAgICAgICB2YXIgZXh0cmFjdEhlYWRlcnMgPSBmdW5jdGlvbih4aHIsIHN0YWNrRWxlbWVudCkgewogICAgICAgICAgICAgICAgLyogSGVyZSB3ZSBhdm9pZCB0byBjYWxsIHhoci5nZXRSZXNwb25zZUhlYWRlciBpbiBvcmRlciB0byAqLwogICAgICAgICAgICAgICAgLyogcHJldmVudCBwb2xsdXRpbmcgdGhlIGNvbnNvbGUgd2l0aCBDT1JTIHNlY3VyaXR5IGVycm9ycyAqLwogICAgICAgICAgICAgICAgdmFyIGFsbEhlYWRlcnMgPSB4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCk7CiAgICAgICAgICAgICAgICB2YXIgcmV0OwoKICAgICAgICAgICAgICAgIGlmIChyZXQgPSBhbGxIZWFkZXJzLm1hdGNoKC9eeC1kZWJ1Zy10b2tlbjpcXHMrKC4qKVwkL2ltKSkgewogICAgICAgICAgICAgICAgICAgIHN0YWNrRWxlbWVudC5wcm9maWxlID0gcmV0WzFdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHJldCA9IGFsbEhlYWRlcnMubWF0Y2goL154LWRlYnVnLXRva2VuLWxpbms6XFxzKyguKilcJC9pbSkpIHsKICAgICAgICAgICAgICAgICAgICBzdGFja0VsZW1lbnQucHJvZmlsZXJVcmwgPSByZXRbMV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAocmV0ID0gYWxsSGVhZGVycy5tYXRjaCgvXlN5bWZvbnktRGVidWctVG9vbGJhci1SZXBsYWNlOlxccysoLiopXCQvaW0pKSB7CiAgICAgICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LnRvb2xiYXJSZXBsYWNlRmluaXNoZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBzdGFja0VsZW1lbnQudG9vbGJhclJlcGxhY2UgPSAnMScgPT09IHJldFsxXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHZhciBzdWNjZXNzU3RyZWFrID0gNDsKICAgICAgICAgICAgdmFyIHBlbmRpbmdSZXF1ZXN0cyA9IDA7CiAgICAgICAgICAgIHZhciByZW5kZXJBamF4UmVxdWVzdHMgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciByZXF1ZXN0Q291bnRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZi10b29sYmFyLWFqYXgtcmVxdWVzdC1jb3VudGVyJyk7CiAgICAgICAgICAgICAgICBpZiAoIXJlcXVlc3RDb3VudGVyKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmVxdWVzdENvdW50ZXIudGV4dENvbnRlbnQgPSByZXF1ZXN0U3RhY2subGVuZ3RoOwoKICAgICAgICAgICAgICAgIHZhciBpbmZvU3BhbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2YtdG9vbGJhci1hamF4LWluZm9cIik7CiAgICAgICAgICAgICAgICBpZiAoaW5mb1NwYW4pIHsKICAgICAgICAgICAgICAgICAgICBpbmZvU3Bhbi50ZXh0Q29udGVudCA9IHJlcXVlc3RTdGFjay5sZW5ndGggKyAnIEFKQVggcmVxdWVzdCcgKyAocmVxdWVzdFN0YWNrLmxlbmd0aCAhPT0gMSA/ICdzJyA6ICcnKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgYWpheFRvb2xiYXJQYW5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZi10b29sYmFyLWJsb2NrLWFqYXgnKTsKICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0U3RhY2subGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgYWpheFRvb2xiYXJQYW5lbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYWpheFRvb2xiYXJQYW5lbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdSZXF1ZXN0cyA+IDApIHsKICAgICAgICAgICAgICAgICAgICBhZGRDbGFzcyhhamF4VG9vbGJhclBhbmVsLCAnc2YtYWpheC1yZXF1ZXN0LWxvYWRpbmcnKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3VjY2Vzc1N0cmVhayA8IDQpIHsKICAgICAgICAgICAgICAgICAgICBhZGRDbGFzcyhhamF4VG9vbGJhclBhbmVsLCAnc2YtdG9vbGJhci1zdGF0dXMtcmVkJyk7CiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoYWpheFRvb2xiYXJQYW5lbCwgJ3NmLWFqYXgtcmVxdWVzdC1sb2FkaW5nJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGFqYXhUb29sYmFyUGFuZWwsICdzZi1hamF4LXJlcXVlc3QtbG9hZGluZycpOwogICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGFqYXhUb29sYmFyUGFuZWwsICdzZi10b29sYmFyLXN0YXR1cy1yZWQnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHZhciBzdGFydEFqYXhSZXF1ZXN0ID0gZnVuY3Rpb24oaW5kZXgpIHsKICAgICAgICAgICAgICAgIHZhciB0Ym9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZi10b29sYmFyLWFqYXgtcmVxdWVzdC1saXN0Jyk7CiAgICAgICAgICAgICAgICBpZiAoIXRib2R5KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBuYk9mQWpheFJlcXVlc3QgPSB0Ym9keS5yb3dzLmxlbmd0aDsKICAgICAgICAgICAgICAgIGlmIChuYk9mQWpheFJlcXVlc3QgPj0gMTAwKSB7CiAgICAgICAgICAgICAgICAgICAgdGJvZHkuZGVsZXRlUm93KDApOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciByZXF1ZXN0ID0gcmVxdWVzdFN0YWNrW2luZGV4XTsKICAgICAgICAgICAgICAgIHBlbmRpbmdSZXF1ZXN0cysrOwogICAgICAgICAgICAgICAgdmFyIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7CiAgICAgICAgICAgICAgICByZXF1ZXN0LkRPTU5vZGUgPSByb3c7CgogICAgICAgICAgICAgICAgdmFyIHJlcXVlc3ROdW1iZXJDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKICAgICAgICAgICAgICAgIHJlcXVlc3ROdW1iZXJDZWxsLnRleHRDb250ZW50ID0gaW5kZXggKyAxOwogICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKHJlcXVlc3ROdW1iZXJDZWxsKTsKCiAgICAgICAgICAgICAgICB2YXIgcHJvZmlsZXJDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKICAgICAgICAgICAgICAgIHByb2ZpbGVyQ2VsbC50ZXh0Q29udGVudCA9ICduL2EnOwogICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKHByb2ZpbGVyQ2VsbCk7CgogICAgICAgICAgICAgICAgdmFyIG1ldGhvZENlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICAgICAgbWV0aG9kQ2VsbC50ZXh0Q29udGVudCA9IHJlcXVlc3QubWV0aG9kOwogICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKG1ldGhvZENlbGwpOwoKICAgICAgICAgICAgICAgIHZhciB0eXBlQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7CiAgICAgICAgICAgICAgICB0eXBlQ2VsbC50ZXh0Q29udGVudCA9IHJlcXVlc3QudHlwZTsKICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZCh0eXBlQ2VsbCk7CgogICAgICAgICAgICAgICAgdmFyIHN0YXR1c0NvZGVDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKICAgICAgICAgICAgICAgIHZhciBzdGF0dXNDb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgICAgICAgc3RhdHVzQ29kZS50ZXh0Q29udGVudCA9ICduL2EnOwogICAgICAgICAgICAgICAgc3RhdHVzQ29kZUNlbGwuYXBwZW5kQ2hpbGQoc3RhdHVzQ29kZSk7CiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoc3RhdHVzQ29kZUNlbGwpOwoKICAgICAgICAgICAgICAgIHZhciBwYXRoQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7CiAgICAgICAgICAgICAgICBwYXRoQ2VsbC5jbGFzc05hbWUgPSAnc2YtYWpheC1yZXF1ZXN0LXVybCc7CiAgICAgICAgICAgICAgICBpZiAoJ0dFVCcgPT09IHJlcXVlc3QubWV0aG9kKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBhdGhMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICAgICAgICAgIHBhdGhMaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsIHJlcXVlc3QudXJsKTsKICAgICAgICAgICAgICAgICAgICBwYXRoTGluay50ZXh0Q29udGVudCA9IHJlcXVlc3QudXJsOwogICAgICAgICAgICAgICAgICAgIHBhdGhDZWxsLmFwcGVuZENoaWxkKHBhdGhMaW5rKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcGF0aENlbGwudGV4dENvbnRlbnQgPSByZXF1ZXN0LnVybDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHBhdGhDZWxsLnNldEF0dHJpYnV0ZSgndGl0bGUnLCByZXF1ZXN0LnVybCk7CiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQocGF0aENlbGwpOwoKICAgICAgICAgICAgICAgIHZhciBkdXJhdGlvbkNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICAgICAgZHVyYXRpb25DZWxsLmNsYXNzTmFtZSA9ICdzZi1hamF4LXJlcXVlc3QtZHVyYXRpb24nOwogICAgICAgICAgICAgICAgZHVyYXRpb25DZWxsLnRleHRDb250ZW50ID0gJ24vYSc7CiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoZHVyYXRpb25DZWxsKTsKCiAgICAgICAgICAgICAgICByZXF1ZXN0LmxpdmVEdXJhdGlvbkhhbmRsZSA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uQ2VsbC50ZXh0Q29udGVudCA9IChuZXcgRGF0ZSgpIC0gcmVxdWVzdC5zdGFydCkgKyAnIG1zJzsKICAgICAgICAgICAgICAgIH0sIDEwMCk7CgogICAgICAgICAgICAgICAgcm93LmNsYXNzTmFtZSA9ICdzZi1hamF4LXJlcXVlc3Qgc2YtYWpheC1yZXF1ZXN0LWxvYWRpbmcnOwogICAgICAgICAgICAgICAgdGJvZHkuaW5zZXJ0QmVmb3JlKHJvdywgbnVsbCk7CgogICAgICAgICAgICAgICAgdmFyIHRvb2xiYXJJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNmLXRvb2xiYXItYmxvY2stYWpheCAuc2YtdG9vbGJhci1pbmZvJyk7CiAgICAgICAgICAgICAgICB0b29sYmFySW5mby5zY3JvbGxUb3AgPSB0b29sYmFySW5mby5zY3JvbGxIZWlnaHQ7CgogICAgICAgICAgICAgICAgcmVuZGVyQWpheFJlcXVlc3RzKCk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB2YXIgZmluaXNoQWpheFJlcXVlc3QgPSBmdW5jdGlvbihpbmRleCkgewogICAgICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSByZXF1ZXN0U3RhY2tbaW5kZXhdOwogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChyZXF1ZXN0LmxpdmVEdXJhdGlvbkhhbmRsZSk7CgogICAgICAgICAgICAgICAgaWYgKCFyZXF1ZXN0LkRPTU5vZGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHJlcXVlc3QudG9vbGJhclJlcGxhY2UgJiYgIXJlcXVlc3QudG9vbGJhclJlcGxhY2VGaW5pc2hlZCAmJiByZXF1ZXN0LnByb2ZpbGUpIHsKICAgICAgICAgICAgICAgICAgICAvKiBGbGFnIGFzIGNvbXBsZXRlIGJlY2F1c2UgZmluaXNoQWpheFJlcXVlc3QgY2FuIGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lcy4gKi8KICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LnRvb2xiYXJSZXBsYWNlRmluaXNoZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIC8qIFNlYXJjaCB1cCB0aHJvdWdoIHRoZSBET00gdG8gZmluZCB0aGUgdG9vbGJhcidzIGNvbnRhaW5lciBJRC4gKi8KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlbGVtID0gcmVxdWVzdC5ET01Ob2RlOyBlbGVtICYmIGVsZW0gIT09IGRvY3VtZW50OyBlbGVtID0gZWxlbS5wYXJlbnROb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtLmlkLm1hdGNoKC9ec2Z3ZHQvKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgU2Zqcy5sb2FkVG9vbGJhcihlbGVtLmlkLnJlcGxhY2UoL15zZndkdC8sICcnKSwgcmVxdWVzdC5wcm9maWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHBlbmRpbmdSZXF1ZXN0cy0tOwogICAgICAgICAgICAgICAgdmFyIHJvdyA9IHJlcXVlc3QuRE9NTm9kZTsKICAgICAgICAgICAgICAgIC8qIFVucGFjayB0aGUgY2hpbGRyZW4gZnJvbSB0aGUgcm93ICovCiAgICAgICAgICAgICAgICB2YXIgcHJvZmlsZXJDZWxsID0gcm93LmNoaWxkcmVuWzFdOwogICAgICAgICAgICAgICAgdmFyIG1ldGhvZENlbGwgPSByb3cuY2hpbGRyZW5bMl07CiAgICAgICAgICAgICAgICB2YXIgc3RhdHVzQ29kZUNlbGwgPSByb3cuY2hpbGRyZW5bNF07CiAgICAgICAgICAgICAgICB2YXIgc3RhdHVzQ29kZUVsZW0gPSBzdGF0dXNDb2RlQ2VsbC5jaGlsZHJlblswXTsKICAgICAgICAgICAgICAgIHZhciBkdXJhdGlvbkNlbGwgPSByb3cuY2hpbGRyZW5bNl07CgogICAgICAgICAgICAgICAgaWYgKHJlcXVlc3QuZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICByb3cuY2xhc3NOYW1lID0gJ3NmLWFqYXgtcmVxdWVzdCBzZi1hamF4LXJlcXVlc3QtZXJyb3InOwogICAgICAgICAgICAgICAgICAgIG1ldGhvZENlbGwuY2xhc3NOYW1lID0gJ3NmLWFqYXgtcmVxdWVzdC1lcnJvcic7CiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc1N0cmVhayA9IDA7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJvdy5jbGFzc05hbWUgPSAnc2YtYWpheC1yZXF1ZXN0IHNmLWFqYXgtcmVxdWVzdC1vayc7CiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc1N0cmVhaysrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1c0NvZGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXNDb2RlIDwgMzAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c0NvZGVFbGVtLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnc2YtdG9vbGJhci1zdGF0dXMnKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcXVlc3Quc3RhdHVzQ29kZSA8IDQwMCkgewogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNDb2RlRWxlbS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3NmLXRvb2xiYXItc3RhdHVzIHNmLXRvb2xiYXItc3RhdHVzLXllbGxvdycpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c0NvZGVFbGVtLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnc2YtdG9vbGJhci1zdGF0dXMgc2YtdG9vbGJhci1zdGF0dXMtcmVkJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHN0YXR1c0NvZGVFbGVtLnRleHRDb250ZW50ID0gcmVxdWVzdC5zdGF0dXNDb2RlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzdGF0dXNDb2RlRWxlbS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3NmLXRvb2xiYXItc3RhdHVzIHNmLXRvb2xiYXItc3RhdHVzLXJlZCcpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LmR1cmF0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb25DZWxsLnRleHRDb250ZW50ID0gcmVxdWVzdC5kdXJhdGlvbiArICcgbXMnOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LnByb2ZpbGVyVXJsKSB7CiAgICAgICAgICAgICAgICAgICAgcHJvZmlsZXJDZWxsLnRleHRDb250ZW50ID0gJyc7CiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2ZpbGVyTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgICAgICAgICBwcm9maWxlckxpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgcmVxdWVzdC5wcm9maWxlclVybCk7CiAgICAgICAgICAgICAgICAgICAgcHJvZmlsZXJMaW5rLnRleHRDb250ZW50ID0gcmVxdWVzdC5wcm9maWxlOwogICAgICAgICAgICAgICAgICAgIHByb2ZpbGVyQ2VsbC5hcHBlbmRDaGlsZChwcm9maWxlckxpbmspOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJlbmRlckFqYXhSZXF1ZXN0cygpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgeyUgaWYgZXhjbHVkZWRfYWpheF9wYXRocyBpcyBkZWZpbmVkICV9CiAgICAgICAgICAgIGlmICh3aW5kb3cuZmV0Y2ggJiYgd2luZG93LmZldGNoLnBvbHlmaWxsID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIHZhciBvbGRGZXRjaCA9IHdpbmRvdy5mZXRjaDsKICAgICAgICAgICAgICAgIHdpbmRvdy5mZXRjaCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IG9sZEZldGNoLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IGFyZ3VtZW50c1swXTsKICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzWzFdOwogICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbVR5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJndW1lbnRzWzBdKTsKICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1UeXBlID09PSAnW29iamVjdCBSZXF1ZXN0XScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gYXJndW1lbnRzWzBdLnVybDsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBhcmd1bWVudHNbMF0ubWV0aG9kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbHM6IGFyZ3VtZW50c1swXS5jcmVkZW50aWFscywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGFyZ3VtZW50c1swXS5oZWFkZXJzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZTogYXJndW1lbnRzWzBdLm1vZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWRpcmVjdDogYXJndW1lbnRzWzBdLnJlZGlyZWN0CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gU3RyaW5nKHVybCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICghdXJsLm1hdGNoKG5ldyBSZWdFeHAoe3sgZXhjbHVkZWRfYWpheF9wYXRoc3xqc29uX2VuY29kZXxyYXcgfX0pKSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0aG9kID0gJ0dFVCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbXMgJiYgcGFyYW1zLm1ldGhvZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2QgPSBwYXJhbXMubWV0aG9kOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhY2tFbGVtZW50ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IG1ldGhvZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmZXRjaCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogbmV3IERhdGUoKQogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkeCA9IHJlcXVlc3RTdGFjay5wdXNoKHN0YWNrRWxlbWVudCkgLSAxOwogICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrRWxlbWVudC5kdXJhdGlvbiA9IG5ldyBEYXRlKCkgLSBzdGFja0VsZW1lbnQuc3RhcnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFja0VsZW1lbnQuZXJyb3IgPSByLnN0YXR1cyA8IDIwMCB8fCByLnN0YXR1cyA+PSA0MDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFja0VsZW1lbnQuc3RhdHVzQ29kZSA9IHIuc3RhdHVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LnByb2ZpbGUgPSByLmhlYWRlcnMuZ2V0KCd4LWRlYnVnLXRva2VuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFja0VsZW1lbnQucHJvZmlsZXJVcmwgPSByLmhlYWRlcnMuZ2V0KCd4LWRlYnVnLXRva2VuLWxpbmsnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrRWxlbWVudC50b29sYmFyUmVwbGFjZUZpbmlzaGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFja0VsZW1lbnQudG9vbGJhclJlcGxhY2UgPSAnMScgPT09IHIuaGVhZGVycy5nZXQoJ1N5bWZvbnktRGVidWctVG9vbGJhci1SZXBsYWNlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5pc2hBamF4UmVxdWVzdChpZHgpOwogICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFja0VsZW1lbnQuZXJyb3IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluaXNoQWpheFJlcXVlc3QoaWR4KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0QWpheFJlcXVlc3QoaWR4KTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAod2luZG93LlhNTEh0dHBSZXF1ZXN0ICYmIFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyKSB7CiAgICAgICAgICAgICAgICB2YXIgcHJveGllZCA9IFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5vcGVuOwoKICAgICAgICAgICAgICAgIFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24obWV0aG9kLCB1cmwsIGFzeW5jLCB1c2VyLCBwYXNzKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICAgICAgICAgICAgICAvKiBwcmV2ZW50IGxvZ2dpbmcgQUpBWCBjYWxscyB0byBzdGF0aWMgYW5kIGlubGluZSBmaWxlcywgbGlrZSB0ZW1wbGF0ZXMgKi8KICAgICAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IHVybDsKICAgICAgICAgICAgICAgICAgICBpZiAodXJsLnNsaWNlKDAsIDEpID09PSAnLycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IHVybC5pbmRleE9mKCd7eyByZXF1ZXN0LmJhc2VQYXRofGUoJ2pzJykgfX0nKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IHVybC5zbGljZSh7eyByZXF1ZXN0LmJhc2VQYXRofGxlbmd0aCB9fSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoMCA9PT0gdXJsLmluZGV4T2YoJ3t7IChyZXF1ZXN0LnNjaGVtZUFuZEh0dHBIb3N0IH4gcmVxdWVzdC5iYXNlUGF0aCl8ZSgnanMnKSB9fScpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGggPSB1cmwuc2xpY2Uoe3sgKHJlcXVlc3Quc2NoZW1lQW5kSHR0cEhvc3QgfiByZXF1ZXN0LmJhc2VQYXRoKXxsZW5ndGggfX0pOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXRoLm1hdGNoKG5ldyBSZWdFeHAoe3sgZXhjbHVkZWRfYWpheF9wYXRoc3xqc29uX2VuY29kZXxyYXcgfX0pKSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhY2tFbGVtZW50ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IG1ldGhvZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd4aHInLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IG5ldyBEYXRlKCkKICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSByZXF1ZXN0U3RhY2sucHVzaChzdGFja0VsZW1lbnQpIC0gMTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigncmVhZHlzdGF0ZWNoYW5nZScsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYucmVhZHlTdGF0ZSA9PSA0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LmR1cmF0aW9uID0gbmV3IERhdGUoKSAtIHN0YWNrRWxlbWVudC5zdGFydDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFja0VsZW1lbnQuZXJyb3IgPSBzZWxmLnN0YXR1cyA8IDIwMCB8fCBzZWxmLnN0YXR1cyA+PSA0MDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LnN0YXR1c0NvZGUgPSBzZWxmLnN0YXR1czsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0SGVhZGVycyhzZWxmLCBzdGFja0VsZW1lbnQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5pc2hBamF4UmVxdWVzdChpZHgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LCBmYWxzZSk7CgogICAgICAgICAgICAgICAgICAgICAgICBzdGFydEFqYXhSZXF1ZXN0KGlkeCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBwcm94aWVkLmFwcGx5KHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICB7JSBlbmRpZiAlfQoKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGhhc0NsYXNzOiBoYXNDbGFzcywKCiAgICAgICAgICAgICAgICByZW1vdmVDbGFzczogcmVtb3ZlQ2xhc3MsCgogICAgICAgICAgICAgICAgYWRkQ2xhc3M6IGFkZENsYXNzLAoKICAgICAgICAgICAgICAgIHRvZ2dsZUNsYXNzOiB0b2dnbGVDbGFzcywKCiAgICAgICAgICAgICAgICBnZXRQcmVmZXJlbmNlOiBnZXRQcmVmZXJlbmNlLAoKICAgICAgICAgICAgICAgIHNldFByZWZlcmVuY2U6IHNldFByZWZlcmVuY2UsCgogICAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogYWRkRXZlbnRMaXN0ZW5lciwKCiAgICAgICAgICAgICAgICByZXF1ZXN0OiByZXF1ZXN0LAoKICAgICAgICAgICAgICAgIHJlbmRlckFqYXhSZXF1ZXN0czogcmVuZGVyQWpheFJlcXVlc3RzLAoKICAgICAgICAgICAgICAgIGdldFNmd2R0OiBmdW5jdGlvbih0b2tlbikgewogICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZndkdCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNmd2R0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nmd2R0JyArIHRva2VuKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNmd2R0OwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbihzZWxlY3RvciwgdXJsLCBvblN1Y2Nlc3MsIG9uRXJyb3IsIG9wdGlvbnMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxlY3Rvcik7CgogICAgICAgICAgICAgICAgICAgIGlmIChlbCAmJiBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2Z1cmwnKSAhPT0gdXJsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbih4aHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5pbm5lckhUTUwgPSB4aHIucmVzcG9uc2VUZXh0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1zZnVybCcsIHVybCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoZWwsICdsb2FkaW5nJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBlbmRpbmcgPSBwZW5kaW5nUmVxdWVzdHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXF1ZXN0U3RhY2subGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRBamF4UmVxdWVzdChpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3RTdGFja1tpXS5kdXJhdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluaXNoQWpheFJlcXVlc3QoaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogUmV2ZXJ0IHRoZSBwZW5kaW5nIHN0YXRlIGluIGNhc2UgdGhlcmUgd2FzIGEgc3RhcnQgY2FsbGVkIHdpdGhvdXQgYSBmaW5pc2ggYWJvdmUuICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1JlcXVlc3RzID0gcGVuZGluZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAob25TdWNjZXNzIHx8IG5vb3ApKHhociwgZWwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHhocikgeyAob25FcnJvciB8fCBub29wKSh4aHIsIGVsKTsgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucwogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHNob3dUb29sYmFyOiBmdW5jdGlvbih0b2tlbikgewogICAgICAgICAgICAgICAgICAgIHZhciBzZndkdCA9IHRoaXMuZ2V0U2Z3ZHQodG9rZW4pOwogICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKHNmd2R0LCAnc2YtZGlzcGxheS1ub25lJyk7CgogICAgICAgICAgICAgICAgICAgIGlmIChnZXRQcmVmZXJlbmNlKCd0b29sYmFyL2Rpc3BsYXlTdGF0ZScpID09ICdub25lJykgewogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZUb29sYmFyTWFpbkNvbnRlbnQtJyArIHRva2VuKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZUb29sYmFyQ2xlYXJlci0nICsgdG9rZW4pLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZk1pbmlUb29sYmFyLScgKyB0b2tlbikuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmVG9vbGJhck1haW5Db250ZW50LScgKyB0b2tlbikuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZlRvb2xiYXJDbGVhcmVyLScgKyB0b2tlbikuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZk1pbmlUb29sYmFyLScgKyB0b2tlbikuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIGhpZGVUb29sYmFyOiBmdW5jdGlvbih0b2tlbikgewogICAgICAgICAgICAgICAgICAgIHZhciBzZndkdCA9IHRoaXMuZ2V0U2Z3ZHQodG9rZW4pOwogICAgICAgICAgICAgICAgICAgIGFkZENsYXNzKHNmd2R0LCAnc2YtZGlzcGxheS1ub25lJyk7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIGluaXRUb29sYmFyOiBmdW5jdGlvbih0b2tlbikgewogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1Rvb2xiYXIodG9rZW4pOwoKICAgICAgICAgICAgICAgICAgICB2YXIgaGlkZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZlRvb2xiYXJIaWRlQnV0dG9uLScgKyB0b2tlbik7CiAgICAgICAgICAgICAgICAgICAgdmFyIGhpZGVCdXR0b25TdmcgPSBoaWRlQnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpOwogICAgICAgICAgICAgICAgICAgIGhpZGVCdXR0b25Tdmcuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7CiAgICAgICAgICAgICAgICAgICAgaGlkZUJ1dHRvblN2Zy5zZXRBdHRyaWJ1dGUoJ2ZvY3VzYWJsZScsICdmYWxzZScpOwogICAgICAgICAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoaGlkZUJ1dHRvbiwgJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IHRoaXMucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgICAgICAgICAgcC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgICAgICAocC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nIHx8IHAucHJldmlvdXNTaWJsaW5nKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZNaW5pVG9vbGJhci0nICsgdG9rZW4pLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgICAgICAgICBzZXRQcmVmZXJlbmNlKCd0b29sYmFyL2Rpc3BsYXlTdGF0ZScsICdub25lJyk7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIHZhciBzaG93QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmVG9vbGJhck1pbmlUb2dnbGVyLScgKyB0b2tlbik7CiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3dCdXR0b25TdmcgPSBzaG93QnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpOwogICAgICAgICAgICAgICAgICAgIHNob3dCdXR0b25Tdmcuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7CiAgICAgICAgICAgICAgICAgICAgc2hvd0J1dHRvblN2Zy5zZXRBdHRyaWJ1dGUoJ2ZvY3VzYWJsZScsICdmYWxzZScpOwogICAgICAgICAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoc2hvd0J1dHRvbiwgJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IHRoaXMucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW0uc3R5bGUuZGlzcGxheSA9PSAnbm9uZScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZlRvb2xiYXJNYWluQ29udGVudC0nICsgdG9rZW4pLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZUb29sYmFyQ2xlYXJlci0nICsgdG9rZW4pLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmVG9vbGJhck1haW5Db250ZW50LScgKyB0b2tlbikuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZUb29sYmFyQ2xlYXJlci0nICsgdG9rZW4pLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHNldFByZWZlcmVuY2UoJ3Rvb2xiYXIvZGlzcGxheVN0YXRlJywgJ2Jsb2NrJyk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIGxvYWRUb29sYmFyOiBmdW5jdGlvbih0b2tlbiwgbmV3VG9rZW4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRyaWVzQ291bnRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZkxvYWRDb3VudGVyLScgKyB0b2tlbik7CgogICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gewogICAgICAgICAgICAgICAgICAgICAgICByZXRyeTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgb25TZW5kOiBmdW5jdGlvbiAoY291bnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCA9PT0gMykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuaW5pdFRvb2xiYXIodG9rZW4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmllc0NvdW50ZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmllc0NvdW50ZXIudGV4dENvbnRlbnQgPSBjb3VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICB2YXIgY2FuY2VsQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmTG9hZENhbmNlbC0nICsgdG9rZW4pOwogICAgICAgICAgICAgICAgICAgIGlmIChjYW5jZWxCdXR0b24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihjYW5jZWxCdXR0b24sICdjbGljaycsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnN0b3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5oaWRlVG9vbGJhcih0b2tlbik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgbmV3VG9rZW4gPSAobmV3VG9rZW4gfHwgdG9rZW4pOwoKICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWQoCiAgICAgICAgICAgICAgICAgICAgICAgICdzZndkdCcgKyB0b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgJ3t7IHVybChcIl93ZHRcIiwgeyBcInRva2VuXCI6IFwieHh4eHh4XCIgfSl8ZXNjYXBlKCdqcycpIH19Jy5yZXBsYWNlKC94eHh4eHgvLCBuZXdUb2tlbiksCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHhociwgZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIERvIG5vdGhpbmcgaW4gdGhlIGVkZ2UgY2FzZSB3aGVyZSB0aGUgdG9vbGJhciBoYXMgYWxyZWFkeSBiZWVuIHJlcGxhY2VkIHdpdGggYSBuZXcgb25lICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZlRvb2xiYXJNYWluQ29udGVudC0nICsgbmV3VG9rZW4pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEV2YWx1YXRlIGluIGdsb2JhbCBzY29wZSBzY3JpcHRzIGVtYmVkZGVkIGluc2lkZSB0aGUgdG9vbGJhciAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGksIHNjcmlwdHMgPSBbXS5zbGljZS5jYWxsKGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NjcmlwdCcpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzY3JpcHRzLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNjcmlwdHNbaV0uZmlyc3RDaGlsZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmFsLmNhbGwoe30sIHNjcmlwdHNbaV0uZmlyc3RDaGlsZC5ub2RlVmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gLTEgIT09IHhoci5yZXNwb25zZVRleHQuaW5kZXhPZignc2YtdG9vbGJhcnJlc2V0JykgPyAnYmxvY2snIDogJ25vbmUnOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbC5zdHlsZS5kaXNwbGF5ID09ICdub25lJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmluaXRUb29sYmFyKG5ld1Rva2VuKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBIYW5kbGUgdG9vbGJhci1pbmZvIHBvc2l0aW9uICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9vbGJhckJsb2NrcyA9IFtdLnNsaWNlLmNhbGwoZWwucXVlcnlTZWxlY3RvckFsbCgnLnNmLXRvb2xiYXItYmxvY2snKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdG9vbGJhckJsb2Nrcy5sZW5ndGg7ICsraSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXJCbG9ja3NbaV0ub25tb3VzZW92ZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b29sYmFySW5mbyA9IHRoaXMucXVlcnlTZWxlY3RvckFsbCgnLnNmLXRvb2xiYXItaW5mbycpWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFnZVdpZHRoID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRXaWR0aCA9IHRvb2xiYXJJbmZvLm9mZnNldFdpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVmdFZhbHVlID0gKGVsZW1lbnRXaWR0aCArIHRoaXMub2Zmc2V0TGVmdCkgLSBwYWdlV2lkdGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByaWdodFZhbHVlID0gKGVsZW1lbnRXaWR0aCArIChwYWdlV2lkdGggLSB0aGlzLm9mZnNldExlZnQpKSAtIHBhZ2VXaWR0aDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJlc2V0IHJpZ2h0IGFuZCBsZWZ0IHZhbHVlLCB1c2VmdWwgb24gd2luZG93IHJlc2l6ZSAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFySW5mby5zdHlsZS5yaWdodCA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFySW5mby5zdHlsZS5sZWZ0ID0gJyc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudFdpZHRoID4gcGFnZVdpZHRoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFySW5mby5zdHlsZS5sZWZ0ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChsZWZ0VmFsdWUgPiAwICYmIHJpZ2h0VmFsdWUgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFySW5mby5zdHlsZS5yaWdodCA9IChyaWdodFZhbHVlICogLTEpICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsZWZ0VmFsdWUgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFySW5mby5zdHlsZS5sZWZ0ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXJJbmZvLnN0eWxlLnJpZ2h0ID0gJzBweCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckFqYXhSZXF1ZXN0cygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2YtdG9vbGJhci1hamF4LWNsZWFyJyksICdjbGljaycsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RTdGFjayA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckFqYXhSZXF1ZXN0cygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NTdHJlYWsgPSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZi10b29sYmFyLWFqYXgtcmVxdWVzdC1saXN0JykuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNmLXRvb2xiYXItYmxvY2stYWpheCcpLCAnbW91c2VlbnRlcicsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNmLXRvb2xiYXItYmxvY2stYWpheCAuc2YtdG9vbGJhci1pbmZvJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5zY3JvbGxUb3AgPSBlbGVtLnNjcm9sbEhlaWdodDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2YtdG9vbGJhci1ibG9jay1hamF4ID4gLnNmLXRvb2xiYXItaWNvbicpLCAnY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVDbGFzcyh0aGlzLnBhcmVudE5vZGUsICdob3ZlcicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGR1bXBJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNmLXRvb2xiYXItYmxvY2stZHVtcCAuc2YtdG9vbGJhci1pbmZvJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZHVtcEluZm8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKGR1bXBJbmZvLCAnc2ZiZWZvcmVkdW1wY29sbGFwc2UnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1bXBJbmZvLnN0eWxlLm1pbkhlaWdodCA9IGR1bXBJbmZvLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCsncHgnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZHVtcEluZm8sICdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdW1wSW5mby5zdHlsZS5taW5IZWlnaHQgPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oeGhyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyAhPT0gMCAmJiAhb3B0aW9ucy5zdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNmd2R0ID0gdGhhdC5nZXRTZndkdCh0b2tlbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Z3ZHQuaW5uZXJIVE1MID0gJ1xcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNmLXRvb2xiYXJyZXNldCBub3RyYW5zbGF0ZVwiPlxcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZi10b29sYmFyLWljb25cIj48c3ZnIHdpZHRoPVwiMjZcIiBoZWlnaHQ9XCIyOFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2ZXJzaW9uPVwiMS4xXCIgeD1cIjBweFwiIHk9XCIwcHhcIiB2aWV3Qm94PVwiMCAwIDI2IDI4XCIgZW5hYmxlLWJhY2tncm91bmQ9XCJuZXcgMCAwIDI2IDI4XCIgeG1sOnNwYWNlPVwicHJlc2VydmVcIj48cGF0aCBmaWxsPVwiI0ZGRkZGRlwiIGQ9XCJNMTMgMEM1LjggMCAwIDUuOCAwIDEzYzAgNy4yIDUuOCAxMyAxMyAxM2M3LjIgMCAxMy01LjggMTMtMTNDMjYgNS44IDIwLjIgMCAxMyAweiBNMjAgNy41IGMtMC42IDAtMS0wLjMtMS0wLjljMC0wLjIgMC0wLjQgMC4yLTAuNmMwLjEtMC4zIDAuMi0wLjMgMC4yLTAuNGMwLTAuMy0wLjUtMC40LTAuNy0wLjRjLTIgMC4xLTIuNSAyLjctMi45IDQuOGwtMC4yIDEuMSBjMS4xIDAuMiAxLjkgMCAyLjQtMC4zYzAuNi0wLjQtMC4yLTAuOC0wLjEtMS4zQzE4IDkuMiAxOC40IDkgMTguNyA4LjljMC41IDAgMC44IDAuNSAwLjggMWMwIDAuOC0xLjEgMi0zLjMgMS45IGMtMC4zIDAtMC41IDAtMC43LTAuMUwxNSAxNC4xYy0wLjQgMS43LTAuOSA0LjEtMi42IDYuMmMtMS41IDEuOC0zLjEgMi4xLTMuOCAyLjFjLTEuMyAwLTIuMS0wLjYtMi4yLTEuNmMwLTAuOSAwLjgtMS40IDEuMy0xLjQgYzAuNyAwIDEuMiAwLjUgMS4yIDEuMWMwIDAuNS0wLjIgMC42LTAuNCAwLjdjLTAuMSAwLjEtMC4zIDAuMi0wLjMgMC40YzAgMC4xIDAuMSAwLjMgMC40IDAuM2MwLjUgMCAwLjktMC4zIDEuMi0wLjUgYzEuMy0xIDEuNy0yLjkgMi40LTYuMmwwLjEtMC44YzAuMi0xLjEgMC41LTIuMyAwLjgtMy41Yy0wLjktMC43LTEuNC0xLjUtMi42LTEuOGMtMC44LTAuMi0xLjMgMC0xLjcgMC40QzguNCAxMCA4LjYgMTAuNyA5IDExLjEgbDAuNyAwLjdjMC44IDAuOSAxLjMgMS43IDEuMSAyLjdjLTAuMyAxLjYtMi4xIDIuOC00LjMgMi4xYy0xLjktMC42LTIuMi0xLjktMi0yLjdjMC4yLTAuNiAwLjctMC44IDEuMi0wLjYgYzAuNSAwLjIgMC43IDAuOCAwLjYgMS4zYzAgMC4xIDAgMC4xLTAuMSAwLjNDNiAxNSA1LjkgMTUuMiA1LjkgMTUuM2MtMC4xIDAuNCAwLjQgMC43IDAuOCAwLjhjMC44IDAuMyAxLjctMC4yIDEuOS0wLjkgYzAuMi0wLjYtMC4yLTEuMS0wLjQtMS4ybC0wLjgtMC45Yy0wLjQtMC40LTEuMi0xLjUtMC44LTIuOGMwLjItMC41IDAuNS0xIDAuOS0xLjRjMS0wLjcgMi0wLjggMy0wLjZjMS4zIDAuNCAxLjkgMS4yIDIuOCAxLjkgYzAuNS0xLjMgMS4xLTIuNiAyLTMuOGMwLjktMSAyLTEuNyAzLjMtMS44QzIwIDQuOCAyMSA1LjQgMjEgNi4zQzIxIDYuNyAyMC44IDcuNSAyMCA3LjV6XCIvPjwvc3ZnPjwvZGl2PlxcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGxvYWRpbmcgdGhlIHdlYiBkZWJ1ZyB0b29sYmFyLiA8YSBocmVmPVwie3sgdXJsKFwiX3Byb2ZpbGVyX2hvbWVcIil8ZXNjYXBlKCdqcycpIH19JyArIG5ld1Rva2VuICsgJ1wiPk9wZW4gdGhlIHdlYiBwcm9maWxlci48L2E+XFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZndkdC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3NmLXRvb2xiYXIgc2YtZXJyb3ItdG9vbGJhcicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zCiAgICAgICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHRvZ2dsZTogZnVuY3Rpb24oc2VsZWN0b3IsIGVsT24sIGVsT2ZmKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRtcCA9IGVsT24uc3R5bGUuZGlzcGxheSwKICAgICAgICAgICAgICAgICAgICAgICAgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxlY3Rvcik7CgogICAgICAgICAgICAgICAgICAgIGVsT24uc3R5bGUuZGlzcGxheSA9IGVsT2ZmLnN0eWxlLmRpc3BsYXk7CiAgICAgICAgICAgICAgICAgICAgZWxPZmYuc3R5bGUuZGlzcGxheSA9IHRtcDsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScgPT09IHRtcCA/ICdub25lJyA6ICdibG9jayc7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgfSkoKTsKICAgIH0KCiAgICBTZmpzLmxvYWRUb29sYmFyKCd7eyB0b2tlbiB9fScpOwovKl1dPiovPC9zY3JpcHQ+CiIsICJAV2ViUHJvZmlsZXIvUHJvZmlsZXIvdG9vbGJhcl9qcy5odG1sLnR3aWciLCAiL3Zhci93d3cvaHRtbC9tZWRpYXRla2Zvcm1hdGlvbi92ZW5kb3Ivc3ltZm9ueS93ZWItcHJvZmlsZXItYnVuZGxlL1Jlc291cmNlcy92aWV3cy9Qcm9maWxlci90b29sYmFyX2pzLmh0bWwudHdpZyIpOwogICAgfQp9CiI7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TjtzOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG1ldGFkYXRhIjthOjA6e319";